<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline' 'unsafe-eval' unpkg.com www.googletagmanager.com *.google-analytics.com; img-src 'self' data: *;style-src 'self' 'unsafe-inline'">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		<link rel="canonical" href="https://blog.jermdavis.dev/posts/2020/deploying-dianoga-in-developer-containers">
		<meta name="description" content="I bumped into an interesting issue recently, which I though others might come across. Trying to run a project with <a href=&quot;https://github.com/kamsar/Dianoga&quot; rel=&quot;noopener&quot; target=&quot;_blank&quot;>Dianoga</a> in it didn't work properly in a developer's Docker container – it kept failing whenever it was asked to process an SVG image. Why didn't that work? Here's why: ">
		<meta property="og:description" content="I bumped into an interesting issue recently, which I though others might come across. Trying to run a project with <a href=&quot;https://github.com/kamsar/Dianoga&quot; rel=&quot;noopener&quot; target=&quot;_blank&quot;>Dianoga</a> in it didn't work properly in a developer's Docker container – it kept failing whenever it was asked to process an SVG image. Why didn't that work? Here's why: ">
		<meta name="keywords" content="Dianoga, Docker, Sitecore">
		<meta name="author" content="Jeremy Davis">
		<meta name="copyright" content="Jeremy Davis">
		<title>Jeremy Davis - Deploying Dianoga in developer&nbsp;containers</title>
		<meta name="robots" content="index, follow">
		<link type="application/rss+xml" rel="alternate" title="Jeremy Davis - Sitecore, C# and web development" href="/feed.rss">
		<link type="application/atom+xml" rel="alternate" title="Jeremy Davis - Sitecore, C# and web development" href="/feed.atom">
		<meta name="application-name" content="Jeremy Davis">
		<meta name="msapplication-tooltip" content="Jeremy Davis">
		<meta name="msapplication-starturl" content="/">
		<link rel="manifest" href="/manifest.webmanifest">
		<meta property="og:type" content="article">
		<meta property="og:title" content="Deploying Dianoga in developer&amp;#xA0;containers [by Jeremy Davis]">
		<meta property="og:publish_date" content="2020-10-26T00:00:00+0000">
		<meta property="article:published_time" content="2020-10-26T00:00:00+0000">
		<meta property="og:image" content="https://blog.jermdavis.dev/img/featured/deploying-dianoga-in-developer-containers-social.jpg">
		<meta property="og:image:alt" content="Logo image showing post title 'Deploying Dianoga in developer&amp;#xA0;containers' and author 'Jeremy Davis'">
		<script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "article",
        "headline": "Deploying Dianoga in developer&#xA0;containers",
        "url": "https://blog.jermdavis.dev/posts/2020/deploying-dianoga-in-developer-containers",
        "image": [
            {
                "@type": "ImageObject",
                "contentUrl": "https://blog.jermdavis.dev/img/featured/deploying-dianoga-in-developer-containers-social.jpg",
                "caption": "Logo image showing post title 'Deploying Dianoga in developer&#xA0;containers' and author 'Jeremy Davis'"
            }
        ],
        "datePublished": "2020-10-26T00:00:00+0000",
        "author": [{
            "@type": "Person",
            "name": "Jeremy Davis",
            "url": "https://jermdavis.dev/"
        }]
    }
    
		</script>
		<meta property="og:url" content="https://blog.jermdavis.dev/posts/2020/deploying-dianoga-in-developer-containers">
		<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
		<link rel="icon" type="image/png" href="/img/favicon-32x32.png" sizes="32x32">
		<link rel="icon" type="image/png" href="/img/favicon-16x16.png" sizes="16x16">
		<link href="/scss/tailwind.css" rel="stylesheet">
		<link href="/vendor/Enlighter/enlighterjs.min.css" rel="stylesheet">
		<link href="/scss/site-theme.css" rel="stylesheet">
		<script src="/vendor/Cookies/cookies.min.js" defer=""></script>
	</head>
	<body class="max-w-7xl mx-auto text-black" id="top">
		<div id="rp-bar"></div>
		<div class="relative bg-white" x-data="{ open: false }">
			
			<!-- desktop -->
			<div class="px-4 lg:px-6 bg-gray-100">
				<div class="bannerContainer flex justify-between items-center border-b-2 border-gray-100 py-6 lg:justify-start lg:space-x-10">
					<div class="flex justify-start lg:w-0 flex-1">
						<a href="/">
							<img class="mt-2" width="56" height="56" src="/img/Profile.jpg" alt="Jeremy Davis">
						</a>
						<div class="mx-2">
							<div class="text-3xl">Jeremy Davis</div>
							<div class="text-lg">Sitecore, C# and web development</div>
						</div>
					</div>
					<div class="nav -mr-2 -my-2 lg:hidden">
						<button @click="open = true" type="button" class="bg-white rounded-md p-2 inline-flex items-center justify-center text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-indigo-500" aria-expanded="false">
							<span class="sr-only">Open menu</span>
							
							<!-- Heroicon name: outline/menu -->
							<svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
								<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
							</svg>
						</button>
					</div>
					<nav class="nav hidden lg:flex space-x-10">
						<a class="text-base font-medium" href="/posts">Posts</a>
						<a class="text-base font-medium" href="/tags">Tags</a>
						<a class="text-base font-medium" href="/about">About</a>
						<a class="text-base font-medium" href="/links">Useful Links</a>
						<a class="text-base font-medium" href="/mvp">MVP</a>
					</nav>
				</div>
			</div>
			
			<!--Mobile menu, show/hide based on mobile menu state.-->
			<div class="absolute top-0 inset-x-0 p-2 transition transform origin-top-right lg:hidden z-50">
				<div style="display:none;" class="rounded-lg shadow-lg ring-1 ring-black ring-opacity-5 bg-white divide-y-2 divide-gray-50" x-show="open" x-transition="">
					<div class="pt-5 pb-6 px-5">
						<div class="flex items-center justify-between">
							<div class="flex">
								<a href="/">
									<img class="mt-2" width="56" height="56" src="/img/Profile.jpg" alt="Jeremy Davis">
								</a>
								<div class="mx-2">
									<div class="text-2xl">Jeremy Davis</div>
									<div class="text-base">Sitecore, C# and web development</div>
								</div>
							</div>
							<div class="nav -mr-2">
								<button @click="open = false" type="button" class="bg-white rounded-md p-2 inline-flex items-center justify-center text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-indigo-500">
									<span class="sr-only">Close menu</span>
									
									<!-- Heroicon name: outline/x -->
									<svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
										<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
									</svg>
								</button>
							</div>
						</div>
					</div>
					<div class="nav py-6 px-5 pt-0">
						<nav class=" gap-x-8">
							<a class="block mt-5 text-base font-medium" href="/posts">Posts</a>
							<a class="block mt-5 text-base font-medium" href="/tags">Tags</a>
							<a class="block mt-5 text-base font-medium" href="/about">About</a>
							<a class="block mt-5 text-base font-medium" href="/links">Useful Links</a>
							<a class="block mt-5 text-base font-medium" href="/mvp">MVP</a>
						</nav>
					</div>
				</div>
			</div>
		</div>
		<header class="bg-gray-300 px-4 py-1 lg:px-6 text-center" style="">
			<div class="post-heading">
				<div class="url p-1 bg-gray-100 rounded-md">Article printed from:
					<tt>https://blog.jermdavis.dev/posts/2020/deploying-dianoga-in-developer-containers</tt>
				</div>
				<h1 class="text-5xl mb-4 pb-1">
					Deploying Dianoga in developer&nbsp;containers
				</h1>
				<div class="meta">Published 26 October 2020</div>
				<div class="flex py-1 flex-wrap">
					<a href="/tags/dianoga/" class="p-1 mr-1 mt-1 bg-gray-100 rounded-md whitespace-nowrap">
						Dianoga</a>
					<a href="/tags/docker/" class="p-1 mr-1 mt-1 bg-gray-100 rounded-md whitespace-nowrap">
						Docker</a>
					<a href="/tags/sitecore/" class="p-1 mr-1 mt-1 bg-gray-100 rounded-md whitespace-nowrap">
						Sitecore</a>
					<span class="p-1 mr-1 mt-1 bg-gray-100 rounded-md whitespace-nowrap">~3 min. read</span>
				</div>
			</div>
		</header>
		<div class="py-2 lg:pl-3">
			<div class="lg:flex">
				<div class="lg:flex-auto mx-3 lg:min-w-0 content">
					<p>I bumped into an interesting issue recently, which I though others might come across. Trying to run a project with
						<a href="https://github.com/kamsar/Dianoga" rel="noopener" target="_blank">Dianoga</a>
						in it didn't work properly in a developer's Docker container – it kept failing whenever it was asked to process an SVG image. Why didn't that work? Here's why: 
						<!--more-->
					</p>
					<blockquote>
						<b>
							<i>
								<u>Edited to add:</u>
							</i>
						</b>
						Over on Twitter
						<a href="https://twitter.com/markgibbons25" rel="noopener" target="_blank">Mark Gibbons</a>
						helpfully points out that this issue is specific to older versions of Dianoga. With
						<a href="https://github.com/kamsar/Dianoga/releases/tag/5.0.0" rel="noopener" target="_blank">V5 and newer the SVG optimiser now uses a pre-built single-file version</a>, so it wouldn't have the problem below. But the overall issue remains for any other reason you might need to put `node_modules` (or other excluded file/folder types) inside a container.
					</blockquote>
					<h2>The issue:</h2>
					<p>I've been working on a project which is using
						<a href="https://github.com/Sitecore/docker-examples" rel="noopener" target="_blank">Sitecore's docker containers for development</a>. When you build the solution in Visual Studio, it
						<a href="https://containers.doc.sitecore.com/docs/file-deployment#understand-the-solution-structure" rel="noopener" target="_blank">copies the build output to a "deploy" folder, which is mapped into the docker container using a volume</a>. The project has Dianoga set up in the source tree – and all the files and dependencies are deployed by Visual Studio when you hit "publish".</p>
					<p>Initially that all seemed to be working fine – but when an SVG image was added to a page log errors started to appear in the container:</p>
					<pre class="code" data-enlighter-theme="droide-text" data-enlighter-language="text" style="width:100%; overflow:scroll;">1244 08:38:25 INFO  Dianoga: /1548975485 is not something that can be optimized, either because of its file format or because it is excluded.
2336 08:38:25 ERROR Dianoga: Unable to optimize /1548975485 due to a processing error! It will be unchanged.
Exception: System.InvalidOperationException
Message: C:\inetpub\wwwroot\App_Data\Dianoga Tools\SVGO\node.exe exited with unexpected exit code 1. Output: 
    at node.js:974:3
    at startup (node.js:139:18)
    at Function.Module.runMain (module.js:441:10)
    at Function.Module._load (module.js:276:25)
    at Function.Module._resolveFilename (module.js:325:15)
Error: Cannot find module 'C:\inetpub\wwwroot\App_Data\Dianoga Tools\SVGO\node_modules\svgo\bin\svgo'

    ^
    throw err;
module.js:327

Source: Dianoga
   at Dianoga.Optimizers.CommandLineToolOptimizer.ExecuteProcess(String arguments)
   at Dianoga.Optimizers.CommandLineToolOptimizer.ProcessOptimizer(OptimizerArgs args)
   at Dianoga.Optimizers.OptimizerProcessor.Process(OptimizerArgs args)
   at (Object , Object )
   at Sitecore.Pipelines.CorePipeline.Run(PipelineArgs args)
   at Sitecore.Pipelines.DefaultCorePipelineManager.Run(String pipelineName, PipelineArgs args, String pipelineDomain, Boolean failIfNotExists)
   at Sitecore.Pipelines.DefaultCorePipelineManager.Run(String pipelineName, PipelineArgs args, String pipelineDomain)
   at Dianoga.Processors.Pipelines.DianogaOptimize.ExtensionBasedOptimizer.ProcessOptimize(ProcessorArgs args)
   at (Object , Object )
   at Sitecore.Pipelines.CorePipeline.Run(PipelineArgs args)
   at Sitecore.Pipelines.DefaultCorePipelineManager.Run(String pipelineName, PipelineArgs args, String pipelineDomain, Boolean failIfNotExists)
   at Sitecore.Pipelines.DefaultCorePipelineManager.Run(String pipelineName, PipelineArgs args, String pipelineDomain)
   at Dianoga.MediaOptimizer.Process(MediaStream stream, MediaOptions options)

					</pre>
					<p>But at the same time, log messages for successful resizing were appearing for other image formats:</p>
					<pre class="code" data-enlighter-theme="droide-text" data-enlighter-language="text" style="width:100%; overflow:scroll;">3052 08:38:25 INFO  Dianoga: optimized /Default Website/sc_logo.png [original size] (final size: 3141 bytes) - saved 940 bytes / 23.03%. Optimized in 346ms.
3028 08:38:25 INFO  Dianoga: optimized /Default Website/cover.jpg [original size] (final size: 113193 bytes) - saved 6526 bytes / 5.45%. Optimized in 663ms.

					</pre>
					<p>It's clearly running – so what's up with SVGs?</p>
					<h2>What's happening?</h2>
					<p>A bit of digging lead to an important clue in the logs above. In the middle of the error stack trace is the message
						<code>Error: Cannot find module 'C:\inetpub\wwwroot\App_Data\Dianoga Tools\SVGO\node_modules\svgo\bin\svgo'</code>
						- it's saying it cannot find the SVG optimiser code.</p>
					<p>Looking at the deployment folder that Visual Studio has written to, that file does exist, however:</p>
					<p>
						<a href="/img/2020/2020-10-missingsvgo.png" target="_blank">
							<img alt="Missing SVGO" src="/img/2020/2020-10-missingsvgo.png">
						</a>
					</p>
					<p>Since I can see it on my physical disk, but the code in the container is complaining it's not there, I looked at the files inside the container:</p>
					<p>
						<a href="/img/2020/2020-10-missingsvgocontainer.png" target="_blank">
							<img alt="Missing SVGO Container" src="/img/2020/2020-10-missingsvgocontainer.png">
						</a>
					</p>
					<p>Now the error makes sense – the whole "node_modules" folder referenced in the error above is missing from the website folder. That certainly explains why the error happens. But why is the file missing? Cue a pile of googling that lead to no useful answers, and then a bit of head scratching.</p>
					<p>It struck me that the proces of getting the files from your deployment folder on your physical disk to the website folder is a little more complex than you might first expect. The deploy folder on your physical disk is mapped into your container with a
						<a href="https://github.com/Sitecore/docker-examples/blob/ad71c10eea8f175aaa26dca67c129b14120ad8a3/custom-images/docker-compose.xm1.override.yml#L88" rel="noopener" target="_blank">volume definition</a>
						– but if you look at it that volume doesn't map to the
						<code>wwwroot</code>
						folder. As I understand it there's a bug or missing feature in Docker for Windows that means you can't map a volume to a folder in a container which already has files in it. In these containers, the
						<code>wwwroot</code>
						folder already has Sitecore in it - so your deployment volume gets mapped to
						<code>c:\deploy</code>
						inside the container instead - a folder which is empty in the container's image. And then some magic script (that's
						<a href="https://github.com/Sitecore/docker-examples/blob/ad71c10eea8f175aaa26dca67c129b14120ad8a3/custom-images/docker-compose.xm1.override.yml#L90" rel="noopener" target="_blank">part of the entrypoint for the container</a>) watches that folder and copies any changes to the
						<code>wwwroot</code>
						- getting around the limitation of Docker.</p>
					<p>So looking at
						<code>c:\deploy</code>
						inside the container, what do we see?</p>
					<p>
						<a href="/img/2020/2020-10-foundsvgo.png" target="_blank">
							<img alt="Found SVGO" src="/img/2020/2020-10-foundsvgo.png">
						</a>
					</p>
					<p>Bingo - the files are in the container. They just didn't get copied over to
						<code>wwwroot</code>...</p>
					<h2>The solution:</h2>
					<p>So I dug into the container, and looked at the entrypoint script, which lives in
						<code>C:\tools\entrypoints\iis\Development.ps1</code>. It turns out that starts another script which does the file copying as a background job:</p>
					<pre class="code" data-enlighter-language="powershell" style="width:100%; overflow:scroll;">    # Start Watch-Directory.ps1 in background
    Start-Job -Name $watchDirectoryJobName -ArgumentList $WatchDirectoryParameters -ScriptBlock {
        param([hashtable]$params)

        &amp; "C:\tools\scripts\Watch-Directory.ps1" @params

    } | Out-Null

					</pre>
					<p>This job is running another script:
						<code>C:\tools\scripts\Watch-Directory.ps1</code>. And the root of this whole issue was staring out of the parameters for that script:</p>
					<pre class="code" data-enlighter-highlight="24" data-enlighter-language="powershell" style="width:100%; overflow:scroll;">[CmdletBinding(SupportsShouldProcess)]
param(
    [Parameter(Mandatory = $true)]
    [ValidateScript( { Test-Path $_ -PathType 'Container' })]
    [string]$Path,

    [Parameter(Mandatory = $true)]
    [ValidateScript( { Test-Path $_ -PathType 'Container' })]
    [string]$Destination,

    [Parameter(Mandatory = $false)]
    [int]$Sleep = 200,

    [Parameter(Mandatory = $false)]
    [int]$Timeout = 0,

    [Parameter(Mandatory = $false)]
    [array]$DefaultExcludedFiles = @("*.user", "*.cs", "*.csproj", "packages.config", "*ncrunch*", ".gitignore", ".gitkeep", ".dockerignore", "*.example", "*.disabled"),

    [Parameter(Mandatory = $false)]
    [array]$ExcludeFiles = @(),

    [Parameter(Mandatory = $false)]
    [array]$DefaultExcludedDirectories = @("obj", "Properties", "node_modules"),

    [Parameter(Mandatory = $false)]
    [array]$ExcludeDirectories = @()
)

					</pre>
					<p>The default value for on of the parameters explicitly excludes any folder called
						<code>node_modules</code>
						by default! That does make some sense - I think in most scenarios you wouldn't want that copied into your container – it's usually
						<b>
							<i>HUGE</i>
						</b>
						and it's also usually not required at runtime. But Dianoga's SVG optimiser is an exception here...</p>
					<p>But luckily it takes that set of exclusions as a parameter, and the parent entrypoint script also allows you to pass through a hashtable of parameters for this file watching script.</p>
					<p>So the solution to this whole thing is surprisingly simple. You can adjust the entrypoint entry for your container in your Docker Compose file, to pass through the value for
						<code>$DefaultExcludedDirectories</code>
						with no exclusion for
						<code>node_modules</code>. So for my CM container, that becomes:</p>
					<pre class="code" data-enlighter-theme="droide-text" data-enlighter-highlight="15" data-enlighter-language="text" style="width:100%; overflow:scroll;">  cm:
    image: ${REGISTRY}${COMPOSE_PROJECT_NAME}-xm1-cm:${VERSION:-latest}
    build:
      context: ./containers/build/cm
      args:
        BASE_IMAGE: ${SITECORE_DOCKER_REGISTRY}sitecore-xm1-cm:${SITECORE_VERSION}
        SPE_IMAGE: ${SITECORE_MODULE_REGISTRY}spe-assets:${SPE_VERSION}
        TOOLING_IMAGE: ${SITECORE_TOOLS_REGISTRY}sitecore-docker-tools-assets:${TOOLS_VERSION}
    environment:
      Sitecore_ConnectionStrings_Solr.Search: http://solr:8983/solr;SolrCloud=true
    volumes:
      - ${LOCAL_DEPLOY_PATH}\website:C:\deploy
      - ${LOCAL_DATA_PATH}\cm:C:\inetpub\wwwroot\App_Data\logs
      - ..\src:C:\unicorn
    entrypoint: powershell -Command "&amp; C:\tools\entrypoints\iis\Development.ps1 -WatchDirectoryParameters @{DefaultExcludedDirectories=@('obj', 'Properties'); Path='C:\deploy'; Destination='C:\inetpub\wwwroot';}"

					</pre>
					<p>I discovered in trying to do this that if you override any parameters like this, you have to pass them all - hence the need to add the
						<code>Path</code>
						and
						<code>Destination</code>
						properties too. If you don't the sync script throws an error when you try to start the container.</p>
					<p>But once that change was made, and the CM container was rebuilt, all the files for Dianoga appeared in the right places:</p>
					<p>
						<a href="/img/2020/2020-10-fixedsvgo.png" target="_blank">
							<img alt="FixedS VGO" src="/img/2020/2020-10-fixedsvgo.png">
						</a>
					</p>
					<p>And Dianoga starts compressing SVGs:</p>
					<pre class="code" data-enlighter-theme="droide-text" data-enlighter-highlight="3" data-enlighter-language="text" style="width:100%; overflow:scroll;">1516 09:22:43 INFO  Dianoga: optimized /Default Website/sc_logo.png [original size] (final size: 3141 bytes) - saved 940 bytes / 23.03%. Optimized in 275ms.
2776 09:22:43 INFO  Dianoga: optimized /Default Website/cover.jpg [original size] (final size: 113193 bytes) - saved 6526 bytes / 5.45%. Optimized in 635ms.
2172 09:22:44 INFO  Dianoga: optimized /1548975485.svg [original size] (final size: 5822 bytes) - saved 12993 bytes / 69.06%. Optimized in 1461ms.

					</pre>
					<p>Problem solved!</p>
					<a class="gotop" href="#top">↑ Back to top</a>
				</div>
				<div class="sidebar lg:flex-none lg:w-64 m-0 mt-1 lg:mt-0 lg:p-1 lg:bg-gray-100">
					<div class="md:flex-row md:flex lg:flex-col">
						<section class="md:flex-2 md:flex-grow md:flex-shrink">
							<h3 class="bg-gray-300 p-2 md:border-r-2 md:border-white lg:border-r-0">Top Tags</h3>
							<div class="bg-white p-2 flex flex-wrap">
								<a href="/tags/sitecore/" class="flex-initial text-lg p-1 mr-1 bg-gray-100 rounded-md mt-1">
									Sitecore (224)</a>
								<a href="/tags/c/" class="flex-initial text-lg p-1 mr-1 bg-gray-100 rounded-md mt-1">
									C# (59)</a>
								<a href="/tags/powershell/" class="flex-initial text-lg p-1 mr-1 bg-gray-100 rounded-md mt-1">
									PowerShell (31)</a>
								<a href="/tags/installation/" class="flex-initial text-lg p-1 mr-1 bg-gray-100 rounded-md mt-1">
									Installation (23)</a>
								<a href="/tags/solr/" class="flex-initial text-lg p-1 mr-1 bg-gray-100 rounded-md mt-1">
									Solr (19)</a>
								<a href="/tags/general/" class="flex-initial text-lg p-1 mr-1 bg-gray-100 rounded-md mt-1">
									General (16)</a>
								<a href="/tags/docker/" class="flex-initial text-lg p-1 mr-1 bg-gray-100 rounded-md mt-1">
									Docker (16)</a>
								<a href="/tags/ui/" class="flex-initial text-lg p-1 mr-1 bg-gray-100 rounded-md mt-1">
									UI (15)</a>
								<a href="/tags/containers/" class="flex-initial text-lg p-1 mr-1 bg-gray-100 rounded-md mt-1">
									Containers (14)</a>
								<a href="/tags/bug/" class="flex-initial text-lg p-1 mr-1 bg-gray-100 rounded-md mt-1">
									Bug (12)</a>
							</div>
							<div class="bg-white mb-2 p-2">
								<a class="text-lg" href="/tags" role="button">All Tags
									<i class="fas fa-angle-double-right"></i>
								</a>
							</div>
						</section>
						<section class="md:flex-2 md:border-l-2 md:border-gray-300 lg:border-l-0 md:flex-shrink-0">
							<h3 class="bg-gray-300 p-2 md:border-r-2 md:border-white lg:border-r-0">Recent Months</h3>
							<div class="bg-white p-2">
								<div>
									<a class="text-lg" href="/posts/2024-02">2024 - February</a>
								</div>
								<div>
									<a class="text-lg" href="/posts/2024-01">2024 - January</a>
								</div>
								<div>
									<a class="text-lg" href="/posts/2023-12">2023 - December</a>
								</div>
								<div>
									<a class="text-lg" href="/posts/2023-11">2023 - November</a>
								</div>
								<div>
									<a class="text-lg" href="/posts/2023-10">2023 - October</a>
								</div>
							</div>
							<div class="bg-white mb-2 p-2">
								<a class="text-lg" href="/posts" role="button">All Posts
									<i class="fas fa-angle-double-right"></i>
								</a>
							</div>
						</section>
						<section class="md:flex-1 md:border-l-2 md:border-gray-300 lg:border-l-0 md:flex-shrink">
							<h3 class="bg-gray-300 p-2 md:border-r-2 md:border-white lg:border-r-0">Socials</h3>
							<div class="bg-white mb-2 p-2">
								<div>
									<a class="text-lg" rel="me" target="_blank" href="https://mastodon.social/@jermdavis">Mastodon</a>
								</div>
								<div>
									<a class="text-lg" rel="me" target="_blank" href="https://www.linkedin.com/in/djdavis/">LinkedIn</a>
								</div>
								<div>
									<a class="text-lg" rel="me" target="_blank" href="https://twitter.com/jermdavis">Twitter</a>
								</div>
							</div>
						</section>
						<section class="mvp md:flex-2 md:border-l-2 md:border-gray-300 lg:border-l-0 md:flex-shrink-0 lg:order-first">
							<h3 class="bg-gray-300 p-2">Sitecore MVP 2015-2024</h3>
							<div class="bg-white mb-2 p-2">
								<a href="/mvp">
									<img class="lg:mx-auto" src="/img/mvp/10yrs.png" width="219" height="219" alt="2024 MVP Badge">
								</a>
							</div>
						</section>
					</div>
				</div>
			</div>
		</div>
		<footer class="lg:flex order-1 bg-gray-100 px-4 lg:px-6 py-4">
			<div class="flex-1 lg:flex-1 text-center lg:text-left">
				<div>©
					<a target="_blank" class="font-medium" rel="noopener" href="https://jermdavis.dev/">Jeremy Davis</a>
					2014-2024</div>
			</div>
			<div class="lg:flex-1 lg:order-3 text-center lg:text-right">
				<a class="font-medium" href="/tools">Published using Statiq</a>
				<br>
			</div>
			<ul class="list-none lg:flex-1 lg:order-2 p-0 text-center lg:align-middle" style="margin:0px !important">
				<li class="inline-block">
					<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 inline-block" fill="none" viewBox="0 0 24 24" stroke="currentColor">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 5c7.18 0 13 5.82 13 13M6 11a7 7 0 017 7m-6 0a1 1 0 11-2 0 1 1 0 012 0z"></path>
					</svg>
				</li>
				<li class="inline-block ml-4">
					<a class="font-medium" target="_blank" href="/feed.rss">RSS</a>
				</li>
				<li class="inline-block ml-4">
					<a class="font-medium" target="_blank" href="/feed.atom">Atom</a>
				</li>
			</ul>
		</footer>
		<div class="min-h-screen bg-gray-300 py-6 flex flex-col justify-center sm:py-12" x-data="{ hide_banner: true }" x-init="hide_banner = docCookies.hasItem('hide_banner');" x-bind:class="{ 'hidden': hide_banner, 'fixed': !hide_banner }">
			<div class="border-2 border-gray-600 bg-gray-100 max-w-screen-lg mx-auto fixed bg-white inset-x-5 p-5 bottom-10 rounded-lg drop-shadow-2xl flex gap-4 flex-wrap md:flex-nowrap text-center md:text-left items-center justify-center md:justify-between">
				<div class="w-full text-lg">
					<a href="https://developers.google.com/analytics/devguides/collection/analyticsjs/cookie-usage" rel="noreferrer" target="_blank">This website uses Google Analytics, and its cookies.</a>
				</div>
				<button type="button" @click="hide_banner = true; docCookies.setItem('hide_banner', true, 'Fri, 31 Dec 9999 23:59:59 GMT', null, null, null, 'strict');" class="bg-gray-400 px-5 py-2 text-white rounded-md hover:bg-gray-600 focus:outline-none" aria-label="Dismiss">Understood</button>
			</div>
		</div>
		<script src="/vendor/Alpine/alpine.3.13.3.min.js" defer=""></script>
		<script src="/vendor/Enlighter/enlighterjs.min.js"></script>
		<script type="text/javascript">
            EnlighterJS.init('pre.code', 'code', {
            theme: 'droide',
            indent : 4,
            linehover : false,
            textOverflow: 'scroll',
            toolbarTop: '',
            toolbarBottom: ''
        });
        
		</script>
		<script src="/vendor/rp/rpbar-1.0.js"></script>
		<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-JQ44ZR47YX"></script>
		<script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-JQ44ZR47YX');
    
		</script>
	</body>
</html>