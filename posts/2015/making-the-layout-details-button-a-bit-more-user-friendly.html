<!DOCTYPE html>
<html lang="en">
	<head>
		<script src="/js/theme.js"></script>
		<meta charset="utf-8">
		<meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline' 'unsafe-eval' unpkg.com www.googletagmanager.com *.google-analytics.com; img-src 'self' data: *;style-src 'self' 'unsafe-inline'; frame-src https://www.youtube.com/">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		<link rel="canonical" href="https://blog.jermdavis.dev/posts/2015/making-the-layout-details-button-a-bit-more-user-friendly">
		<meta name="description" content="The idea that everything in your Sitecore content tree is &quot;an item&quot; is great once you understand how it works, but can be a bit confusing to people who are new to the software. It's a fairly common new-user mistake to set Layout Details on a Template item, rather than on the Standard Values item for the template. This leads to all sorts of &quot;but why are my changes not visible on the website?&quot; confusion.">
		<meta property="og:description" content="The idea that everything in your Sitecore content tree is &quot;an item&quot; is great once you understand how it works, but can be a bit confusing to people who are new to the software. It's a fairly common new-user mistake to set Layout Details on a Template item, rather than on the Standard Values item for the template. This leads to all sorts of &quot;but why are my changes not visible on the website?&quot; confusion.">
		<meta name="keywords" content="Sitecore, Platform DXP, UI">
		<meta name="author" content="Jeremy Davis">
		<meta name="copyright" content="Jeremy Davis">
		<title>Jeremy Davis - Making the Layout Details button a bit more user&nbsp;friendly</title>
		<meta name="robots" content="index, follow">
		<link type="application/rss+xml" rel="alternate" title="Jeremy Davis - Sitecore, C# and web development" href="/feed.rss">
		<link type="application/atom+xml" rel="alternate" title="Jeremy Davis - Sitecore, C# and web development" href="/feed.atom">
		<meta name="application-name" content="Jeremy Davis">
		<meta name="msapplication-tooltip" content="Jeremy Davis">
		<meta name="msapplication-starturl" content="/">
		<link rel="manifest" href="/manifest.webmanifest">
		<meta name="fediverse:creator" content="@jermdavis@mastodon.social">
		<meta property="og:type" content="article">
		<meta property="og:title" content="Making the Layout Details button a bit more user&nbsp;friendly [by Jeremy Davis]">
		<meta property="og:publish_date" content="2015-03-09T00:00:00+0000">
		<meta property="article:published_time" content="2015-03-09T00:00:00+0000">
		<meta property="og:modified_date" content="2016-08-25T00:00:00+0000">
		<meta property="article:modified_time" content="2016-08-25T00:00:00+0000">
		<meta property="og:image" content="https://blog.jermdavis.dev/img/featured/making-the-layout-details-button-a-bit-more-user-friendly-social.jpg">
		<meta property="og:image:alt" content="Logo image showing post title 'Making the Layout Details button a bit more user&nbsp;friendly' and author 'Jeremy Davis'">
		<script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "article",
        "headline": "Making the Layout Details button a bit more user friendly",
        "url": "https://blog.jermdavis.dev/posts/2015/making-the-layout-details-button-a-bit-more-user-friendly",
        "image": [
            {
                "@type": "ImageObject",
                "contentUrl": "https://blog.jermdavis.dev/img/featured/making-the-layout-details-button-a-bit-more-user-friendly-social.jpg",
                "caption": "Logo image showing post title 'Making the Layout Details button a bit more user friendly' and author 'Jeremy Davis'"
            }
        ],
        "datePublished": "2015-03-09T00:00:00+0000",
        "dateModified": "2016-08-25T00:00:00+0000",
        "author": [{
            "@type": "Person",
            "name": "Jeremy Davis",
            "url": "https://jermdavis.dev/"
        }]
    }
    
		</script>
		<meta property="og:url" content="https://blog.jermdavis.dev/posts/2015/making-the-layout-details-button-a-bit-more-user-friendly">
		<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
		<link rel="icon" type="image/png" href="/img/favicon-32x32.png" sizes="32x32">
		<link rel="icon" type="image/png" href="/img/favicon-16x16.png" sizes="16x16">
		<link href="/vendor/Enlighter/enlighterjs.min.css" rel="stylesheet">
		<link href="/dist/main.css" rel="stylesheet">
		<script src="/vendor/Cookies/cookies.min.js" defer=""></script>
	</head>
	<body class="blog" x-bind:class="dk ? 'dark' : ''" id="top">
		<div id="rp-bar"></div>
		<div class="blogNavContainer" x-data="{ open: false }">
			<div class="blogNav">
				<div class="bannerContainer">
					<div class="bannerRow">
						<a href="/">
							<img class="mt-2" width="56" height="56" src="/img/Profile.jpg" alt="Jeremy Davis">
						</a>
						<div class="mx-2">
							<div class="text-3xl">Jeremy Davis</div>
							<div class="text-lg">Sitecore, C# and web development</div>
						</div>
					</div>
					<div class="nav navBurger">
						<button @click="open = true" type="button" class="bg-white rounded-md p-2 inline-flex items-center justify-center text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-indigo-500" aria-expanded="false">
							<span class="sr-only">Open menu</span>
							<svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
								<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
							</svg>
						</button>
					</div>
					<nav class="nav navItemSet">
						<a href="/posts">Posts</a>
						<a href="/tags">Tags</a>
						<a href="/about">About</a>
						<a href="/links">Useful Links</a>
						<a href="/mvp">MVP</a>
						<a href="/search">Search</a>
						<button x-cloak="" x-on:click="Clicked('2')" x-show="$store.theme == '1'">
							<img src="/img/Auto.png" width="32" height="32" alt="Auto" title="Automatic theme">
						</button>
						<button x-cloak="" x-on:click="Clicked('3')" x-show="$store.theme == '2'">
							<img src="/img/Light.png" width="32" height="32" alt="Auto" title="Light theme">
						</button>
						<button x-cloak="" x-on:click="Clicked('1')" x-show="$store.theme == '3'">
							<img src="/img/Dark.png" width="32" height="32" alt="Auto" title="Dark theme">
						</button>
					</nav>
				</div>
			</div>
			<div class="mobileContainer">
				<div style="display:none;" class="popupBox" x-show="open" x-transition="">
					<div class="popupHead">
						<div class="popupHeadInner">
							<div class="titleRow">
								<a href="/">
									<img width="56" height="56" src="/img/Profile.jpg" alt="Jeremy Davis">
								</a>
								<div class="mx-2">
									<div class="text-2xl">Jeremy Davis</div>
									<div class="text-base">Sitecore, C# and web development</div>
								</div>
							</div>
							<div class="nav menuRow">
								<button @click="open = false" type="button">
									<span class="sr-only">Close menu</span>
									
									<!-- Heroicon name: outline/x -->
									<svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
										<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
									</svg>
								</button>
							</div>
						</div>
					</div>
					<div class="nav popupItemsOuter">
						<nav class="gap-x-8">
							<a href="/posts">Posts</a>
							<a href="/tags">Tags</a>
							<a href="/about">About</a>
							<a href="/links">Useful Links</a>
							<a href="/mvp">MVP</a>
							<a href="/search">Search</a>
							<button x-cloak="" x-on:click="Clicked('2')" x-show="$store.theme == '1'">
								<img src="/img/Auto.png" width="32" height="32" alt="Auto" title="Automatic theme">
							</button>
							<button x-cloak="" x-on:click="Clicked('3')" x-show="$store.theme == '2'">
								<img src="/img/Light.png" width="32" height="32" alt="Auto" title="Light theme">
							</button>
							<button x-cloak="" x-on:click="Clicked('1')" x-show="$store.theme == '3'">
								<img src="/img/Dark.png" width="32" height="32" alt="Auto" title="Dark theme">
							</button>
						</nav>
					</div>
				</div>
			</div>
		</div>
		<header class="headerContainer" style="">
			<div class="post-heading">
				<div class="url printBanner">Article printed from:
					<tt>https://blog.jermdavis.dev/posts/2015/making-the-layout-details-button-a-bit-more-user-friendly</tt>
				</div>
				<h1>
					Making the Layout Details button a bit more user&nbsp;friendly
				</h1>
				<div class="meta">Published 09 March 2015</div>
				<div class="meta">Updated 25 August 2016</div>
				<div class="tagList">
					<a href="/tags/sitecore/">
						Sitecore</a>
					<a href="/tags/platform-dxp/">
						Platform DXP</a>
					<a href="/tags/ui/">
						UI</a>
					<span>~2 min. read</span>
				</div>
			</div>
		</header>
		<div class="blogContainerOuter">
			<div class="blogContainerInner">
				<div class="leftCol content">
					<p>The idea that everything in your Sitecore content tree is "an item" is great once you understand how it works, but can be a bit confusing to people who are new to the software. It's a fairly common new-user mistake to set Layout Details on a Template item, rather than on the Standard Values item for the template. This leads to all sorts of "but why are my changes not visible on the website?" confusion.
						<!--more-->
					</p>
					<p>
						<a href="/img/2015/2015-02-layoutdetailsmistake.png" target="_blank">
							<img alt="Layout Details Mistake" src="/img/2015/2015-02-layoutdetailsmistake.png">
						</a>
					</p>
					<p>Talking about this with a colleague a while back, I wondered if there was a way of trying to reduce the likelihood of this sort of mistake for new users. Here's a quick example of an idea I came up with:</p>
					<p>If you look at the Core Database's definitions for the Content Editor ribbon then you'll find the information about what commands are bound to the Details and Reset buttons for Layout.</p>
					<p>Under
						<code>/sitecore/content/Applications/Content Editor/Ribbons/Chunks/Layout/Details</code>
						you find:</p>
					<p>
						<a href="/img/2015/2015-02-setlayoutdetails.png" target="_blank">
							<img alt="SetLayoutDetails" src="/img/2015/2015-02-setlayoutdetails.png">
						</a>
					</p>
					<p>And when you look up these two buttons' commands in the
						<code>commands.config</code>
						file you will find:</p>
					<pre class="code" data-enlighter-language="csharp" style="width:100%; overflow:scroll;">&lt;command name="item:setlayoutdetails" type="Sitecore.Shell.Framework.Commands.SetLayoutDetails,Sitecore.Kernel" /&gt;
&lt;command name="pagedesigner:reset" type="Sitecore.Shell.Applications.Layouts.PageDesigner.Commands.Reset,Sitecore.Client"/&gt;

					</pre>
					<p>These bits of config map the UI commands to implementation classes which inherit from the base type
						<code>Sitecore.Shell.Framework.Commands.Command</code>
						and this includes a method for
						<code>QueryState()</code>
						which the UI framework calls (passing in the item being edited) so a command can say whether it should be visible or enabled.</p>
					<p>Hence one way we can try and solve our problem is to inherit from the standard Sitecore command classes for these menu options and add in some extra logic. Since both commands need the same logic, we can factor that out into a separate class to avoid writing it twice. For the sake of blog-post simplicity, lets stick it in a static helper method. Something like this:</p>
					<pre class="code" data-enlighter-language="csharp" style="width:100%; overflow:scroll;">public static class SimplerLayoutHelper
{
    public static CommandState QueryState(CommandContext context, Func&lt;CommandContext, CommandState&gt; baseMethod)
    {
        Assert.ArgumentNotNull(context, "context");

        if (context.Items != null &amp;&amp; context.Items.Length == 1)
        {
            Item itm = context.Items[0];

            if (itm.Database.Name != "core")
            {
                Item ancestor = itm.Axes.SelectSingleItem("ancestor::*[@@name='templates' or @@name='content']");
                if (ancestor == null)
                {
                    return CommandState.Disabled;
                }
                if (ancestor.Name == "templates" &amp;&amp; itm.Name != "__Standard Values")
                {
                    return CommandState.Disabled;
                }
            }
        }

        return baseMethod(context);
    }
}

					</pre>
					<p>The method takes the command context, and a function pointer to the base
						<code>QueryState()</code>
						method that we want to fall back to if we decide not to return a result. If we have a context item to work on, it checks we're not in the Core database, as we're not bothered about those items. Then it runs an ancestor query to decide if the item in question is a child of the Templates or Content parts of the tree (the two places where setting Layout Details makes sense).</p>
					<p>If it's not in the right part of the tree then we return the "Disabled" state to grey out the button and prevent them being clicked. If it does have Templates as an ancestor then we make a further check to see if the name of the context item is "__Standard Values". If not, we return Disabled to prevent the layout details being set in the wrong part of the Template tree. And otherwise we just pass the context through to the original method to let Sitecore's code take care of the remaining scenarios.</p>
					<p>The replacement command classes can then be put together very simply:</p>
					<pre class="code" data-enlighter-language="csharp" style="width:100%; overflow:scroll;">public class SimplerLayoutDetails : Sitecore.Shell.Framework.Commands.SetLayoutDetails
{
    public override CommandState QueryState(CommandContext context)
    {
        return SimplerLayoutHelper.QueryState(context, base.QueryState);
    }
}

public class SimplerLayoutReset : Sitecore.Shell.Applications.Layouts.PageDesigner.Commands.Reset
{
    public override CommandState QueryState(CommandContext context)
    {
        return SimplerLayoutHelper.QueryState(context, base.QueryState);
    }
}

					</pre>
					<p>All we need to do is call our helper method and pass in the context and the base method from the original class.</p>
					<p>These new command classes can be configured with a simple config patch:</p>
					<pre class="code" data-enlighter-language="xml" style="width:100%; overflow:scroll;">&lt;configuration xmlns:patch="http://www.sitecore.net/xmlconfig/"&gt;
  &lt;sitecore&gt;
    &lt;commands&gt;
      &lt;command 
        patch:instead="*[@name='item:setlayoutdetails']"
        name="item:setlayoutdetails" 
        type="Testing.SimplerLayoutDetails,Testing" /&gt;

      &lt;command 
        patch:instead="*[@name='pagedesigner:reset']"
        name="pagedesigner:reset" 
        type="Testing.SimplerLayoutReset,Testing"/&gt;
    &lt;/commands&gt;    
  &lt;/sitecore&gt;
&lt;/configuration&gt;

					</pre>
					<p>This just replaces the out-of-the-box Command implementations with the new classes above. With that in place, trying to set the Layout Details on the wrong bit of a template doesn't work any more:</p>
					<p>
						<a href="/img/2015/2015-02-wrongitem.png" target="_blank">
							<img alt="Wrong Item" src="/img/2015/2015-02-wrongitem.png">
						</a>
					</p>
					<p>On the Template item, the buttons are greyed out. But if you select the correct Standard Values item:</p>
					<p>
						<a href="/img/2015/2015-02-rightitem.png" target="_blank">
							<img alt="Right Item" src="/img/2015/2015-02-rightitem.png">
						</a>
					</p>
					<p>And that should help prevent confusion about where to make these settings...</p>
					<a class="gotop" href="#top">↑ Back to top</a>
					<ul class="shares">
						<li>
							<b>Feel like sharing?</b>
						</li>
						<li>⇒
							<a target="_blank" rel="nofollow noreferrer" href="https://bsky.app/intent/compose?text=Making the Layout Details button a bit more user&amp;#xA0;friendly%20https://blog.jermdavis.dev/posts/2015/making-the-layout-details-button-a-bit-more-user-friendly">On BlueSky</a>
						</li>
						<li>⇒
							<a target="_blank" rel="nofollow noreferrer" href="https://www.linkedin.com/sharing/share-offsite/?url=https://blog.jermdavis.dev/posts/2015/making-the-layout-details-button-a-bit-more-user-friendly">On LinkedIn</a>
						</li>
						<li>⇒
							<a target="_blank" rel="nofollow noreferrer" href="https://mastodonshare.com/?text=Making the Layout Details button a bit more user&amp;#xA0;friendly&amp;url=https://blog.jermdavis.dev/posts/2015/making-the-layout-details-button-a-bit-more-user-friendly">On Mastodon</a>
						</li>
						<li>⇒
							<a target="_blank" rel="nofollow noreferrer" data-no-validate="data-no-validate" href="mailto:&amp;body=Making the Layout Details button a bit more user&amp;#xA0;friendly%20https://blog.jermdavis.dev/posts/2015/making-the-layout-details-button-a-bit-more-user-friendly">On Email</a>
						</li>
						<li></li>
					</ul>
				</div>
				<div class="rightCol sidebar">
					<div class="barContainer">
						<section class="mvp">
							<h3>Sitecore MVP 2015-2025</h3>
							<div>
								<a href="/mvp">
									<img class="l" src="/img/mvp/program.png" width="219" height="219" alt="2025 MVP Badge">
									<img class="d" src="/img/mvp/program_d.png" width="219" height="219" alt="2025 MVP Badge">
								</a>
							</div>
						</section>
						<section class="recentTags">
							<h3>Recent Tags</h3>
							<div>
								<a href="/tags/windows/">
									Windows
								</a>
								<a href="/tags/azure/">
									Azure
								</a>
								<a href="/tags/c/">
									C#
								</a>
								<a href="/tags/statiq/">
									Statiq
								</a>
								<a href="/tags/sitecore/">
									Sitecore
								</a>
								<a href="/tags/serialisation/">
									Serialisation
								</a>
								<a href="/tags/scs/">
									SCS
								</a>
								<a href="/tags/net/">
									.Net
								</a>
								<a href="/tags/platform-dxp/">
									Platform DXP
								</a>
								<a href="/tags/powershell/">
									PowerShell
								</a>
							</div>
						</section>
						<section class="topTags">
							<h3>Top Tags</h3>
							<div class="list">
								<a href="/tags/sitecore/">
									Sitecore (246)</a>
								<a href="/tags/platform-dxp/">
									Platform DXP (216)</a>
								<a href="/tags/c/">
									C# (70)</a>
								<a href="/tags/powershell/">
									PowerShell (33)</a>
								<a href="/tags/installation/">
									Installation (23)</a>
								<a href="/tags/docker/">
									Docker (20)</a>
								<a href="/tags/general/">
									General (19)</a>
								<a href="/tags/solr/">
									Solr (19)</a>
								<a href="/tags/containers/">
									Containers (17)</a>
								<a href="/tags/visual-studio/">
									Visual Studio (15)</a>
							</div>
							<div class="link">
								<a href="/tags" role="button">All Tags &gt;</a>
							</div>
						</section>
						<section class="months">
							<h3>Recent Months</h3>
							<div class="list">
								<a href="/posts/2025-08">2025 - August</a>
								<a href="/posts/2025-07">2025 - July</a>
								<a href="/posts/2025-06">2025 - June</a>
								<a href="/posts/2025-05">2025 - May</a>
								<a href="/posts/2025-04">2025 - April</a>
							</div>
							<div class="link">
								<a href="/posts" role="button">All Months &gt;</a>
							</div>
						</section>
						<section class="socials">
							<h3>Socials</h3>
							<div>
								<table>
									<tbody>
										<tr>
											<td class="icon">
												<a rel="me" target="_blank" href="https://bsky.app/profile/jermdavis.dev">
													<img src="/img/bluesky.png" width="32" height="32" alt="Bluesky Logo">
												</a>
											</td>
											<td class="title">
												<a rel="me" target="_blank" href="https://bsky.app/profile/jermdavis.dev">
													Bluesky
												</a>
											</td>
										</tr>
										<tr>
											<td class="icon">
												<a rel="me" target="_blank" href="https://www.linkedin.com/in/djdavis/">
													<img src="/img/linkedin.png" width="32" height="32" alt="LinkedIn Logo">
												</a>
											</td>
											<td class="title">
												<a rel="me" target="_blank" href="https://www.linkedin.com/in/djdavis/">
													LinkedIn
												</a>
											</td>
										</tr>
										<tr>
											<td class="icon">
												<a rel="me" target="_blank" href="https://sitecorechat.slack.com/team/U73KL641G">
													<img src="/img/slack.png" width="32" height="32" alt="Sitecore Slack Logo">
												</a>
											</td>
											<td class="title">
												<a rel="me" target="_blank" href="https://sitecorechat.slack.com/team/U73KL641G">
													Sitecore Slack
												</a>
											</td>
										</tr>
										<tr>
											<td class="icon">
												<a rel="me" target="_blank" href="https://mastodon.social/@jermdavis">
													<img src="/img/mastodon.png" width="32" height="32" alt="Mastodon Logo">
												</a>
											</td>
											<td class="title">
												<a rel="me" target="_blank" href="https://mastodon.social/@jermdavis">
													Mastodon
												</a>
											</td>
										</tr>
									</tbody>
								</table>
							</div>
						</section>
					</div>
				</div>
			</div>
		</div>
		<footer class="footerContainer">
			<div class="copyright">
				<div>©
					<a target="_blank" rel="noopener" href="https://jermdavis.dev/">Jeremy Davis</a>
					2014-2025</div>
			</div>
			<div class="statiq">
				<a href="/tools">Published using Statiq</a>
				<br>
			</div>
			<ul class="feeds">
				<li>
					<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 5c7.18 0 13 5.82 13 13M6 11a7 7 0 017 7m-6 0a1 1 0 11-2 0 1 1 0 012 0z"></path>
					</svg>
				</li>
				<li>
					<a target="_blank" href="/feed.rss">RSS</a>
				</li>
				<li>
					<a target="_blank" href="/feed.atom">Atom</a>
				</li>
			</ul>
		</footer>
		<div x-cloak="" class="cookieContainer" x-data="{ hide_banner: true }" x-init="hide_banner = docCookies.hasItem('hide_banner');" x-bind:class="{ 'hidden': hide_banner, 'fixed': !hide_banner }">
			<div class="panel">
				<div class="link">
					<a href="https://developers.google.com/analytics/devguides/collection/analyticsjs/cookie-usage" rel="noreferrer" target="_blank">This website uses Google Analytics, and its cookies.</a>
				</div>
				<button type="button" @click="hide_banner = true; docCookies.setItem('hide_banner', true, 'Fri, 31 Dec 9999 23:59:59 GMT', null, null, null, 'strict');" class="btn" aria-label="Dismiss">
					Understood
				</button>
			</div>
		</div>
		<script src="/vendor/Alpine/alpine.3.13.3.min.js" defer=""></script>
		<script src="/vendor/Enlighter/enlighterjs.min.js"></script>
		<script type="text/javascript">
            EnlighterJS.init('pre.code', 'code', {
            theme: 'droide',
            indent : 4,
            linehover : false,
            textOverflow: 'scroll',
            toolbarTop: '',
            toolbarBottom: ''
        });
        
		</script>
		<script defer="" src="/vendor/rp/rpbar-1.0.js"></script>
		<script defer="" src="/js/post.js"></script>
		<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-JQ44ZR47YX"></script>
		<script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-JQ44ZR47YX');
    
		</script>
	</body>
</html>