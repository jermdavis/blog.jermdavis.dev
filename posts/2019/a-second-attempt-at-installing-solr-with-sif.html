<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline' 'unsafe-eval' unpkg.com www.googletagmanager.com *.google-analytics.com; img-src 'self' data: *;style-src 'self' 'unsafe-inline'">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		<link rel="canonical" href="https://blog.jermdavis.dev/posts/2019/a-second-attempt-at-installing-solr-with-sif">
		<meta name="description" content="Recently <a href=&quot;https://twitter.com/steviemcgill&quot; rel=&quot;noopener noreferrer&quot; target=&quot;_blank&quot;>Steve McGill</a> asked me if I'd tried using SIF's certificate creation when automating Solr setup for Sitecore. I realised I'd not put any effort into how this might work – and that seemed like an excellent excuse for some research...">
		<meta property="og:description" content="Recently <a href=&quot;https://twitter.com/steviemcgill&quot; rel=&quot;noopener noreferrer&quot; target=&quot;_blank&quot;>Steve McGill</a> asked me if I'd tried using SIF's certificate creation when automating Solr setup for Sitecore. I realised I'd not put any effort into how this might work – and that seemed like an excellent excuse for some research...">
		<meta name="keywords" content="SIF, Sitecore, Solr, Installation">
		<meta name="author" content="Jeremy Davis">
		<meta name="copyright" content="Jeremy Davis">
		<title>Jeremy Davis - A Second attempt at installing Solr with&nbsp;SIF</title>
		<meta name="robots" content="index, follow">
		<link type="application/rss+xml" rel="alternate" title="Jeremy Davis - Sitecore, C# and web development" href="/feed.rss">
		<link type="application/atom+xml" rel="alternate" title="Jeremy Davis - Sitecore, C# and web development" href="/feed.atom">
		<meta name="application-name" content="Jeremy Davis">
		<meta name="msapplication-tooltip" content="Jeremy Davis">
		<meta name="msapplication-starturl" content="/">
		<link rel="manifest" href="/manifest.webmanifest">
		<meta property="og:type" content="article">
		<meta property="og:title" content="A Second attempt at installing Solr with&nbsp;SIF [by Jeremy Davis]">
		<meta property="og:publish_date" content="2019-03-04T00:00:00+0000">
		<meta property="article:published_time" content="2019-03-04T00:00:00+0000">
		<meta property="og:image" content="https://blog.jermdavis.dev/img/featured/a-second-attempt-at-installing-solr-with-sif-social.jpg">
		<meta property="og:image:alt" content="Logo image showing post title 'A Second attempt at installing Solr with&nbsp;SIF' and author 'Jeremy Davis'">
		<script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "article",
        "headline": "A Second attempt at installing Solr with SIF",
        "url": "https://blog.jermdavis.dev/posts/2019/a-second-attempt-at-installing-solr-with-sif",
        "image": [
            {
                "@type": "ImageObject",
                "contentUrl": "https://blog.jermdavis.dev/img/featured/a-second-attempt-at-installing-solr-with-sif-social.jpg",
                "caption": "Logo image showing post title 'A Second attempt at installing Solr with SIF' and author 'Jeremy Davis'"
            }
        ],
        "datePublished": "2019-03-04T00:00:00+0000",
        "author": [{
            "@type": "Person",
            "name": "Jeremy Davis",
            "url": "https://jermdavis.dev/"
        }]
    }
    
		</script>
		<meta property="og:url" content="https://blog.jermdavis.dev/posts/2019/a-second-attempt-at-installing-solr-with-sif">
		<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
		<link rel="icon" type="image/png" href="/img/favicon-32x32.png" sizes="32x32">
		<link rel="icon" type="image/png" href="/img/favicon-16x16.png" sizes="16x16">
		<link href="/scss/tailwind.css" rel="stylesheet">
		<link href="/vendor/Enlighter/enlighterjs.min.css" rel="stylesheet">
		<link href="/scss/site-theme.css" rel="stylesheet">
		<script src="/vendor/Cookies/cookies.min.js" defer=""></script>
	</head>
	<body class="max-w-7xl mx-auto text-black" id="top">
		<div id="rp-bar"></div>
		<div class="relative bg-white" x-data="{ open: false }">
			
			<!-- desktop -->
			<div class="px-4 lg:px-6 bg-gray-100">
				<div class="bannerContainer flex justify-between items-center border-b-2 border-gray-100 py-6 lg:justify-start lg:space-x-10">
					<div class="flex justify-start lg:w-0 flex-1">
						<a href="/">
							<img class="mt-2" width="56" height="56" src="/img/Profile.jpg" alt="Jeremy Davis">
						</a>
						<div class="mx-2">
							<div class="text-3xl">Jeremy Davis</div>
							<div class="text-lg">Sitecore, C# and web development</div>
						</div>
					</div>
					<div class="nav -mr-2 -my-2 lg:hidden">
						<button @click="open = true" type="button" class="bg-white rounded-md p-2 inline-flex items-center justify-center text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-indigo-500" aria-expanded="false">
							<span class="sr-only">Open menu</span>
							
							<!-- Heroicon name: outline/menu -->
							<svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
								<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
							</svg>
						</button>
					</div>
					<nav class="nav hidden lg:flex space-x-10">
						<a class="text-base font-medium" href="/posts">Posts</a>
						<a class="text-base font-medium" href="/tags">Tags</a>
						<a class="text-base font-medium" href="/about">About</a>
						<a class="text-base font-medium" href="/links">Useful Links</a>
						<a class="text-base font-medium" href="/mvp">MVP</a>
					</nav>
				</div>
			</div>
			
			<!--Mobile menu, show/hide based on mobile menu state.-->
			<div class="absolute top-0 inset-x-0 p-2 transition transform origin-top-right lg:hidden z-50">
				<div style="display:none;" class="rounded-lg shadow-lg ring-1 ring-black ring-opacity-5 bg-white divide-y-2 divide-gray-50" x-show="open" x-transition="">
					<div class="pt-5 pb-6 px-5">
						<div class="flex items-center justify-between">
							<div class="flex">
								<a href="/">
									<img class="mt-2" width="56" height="56" src="/img/Profile.jpg" alt="Jeremy Davis">
								</a>
								<div class="mx-2">
									<div class="text-2xl">Jeremy Davis</div>
									<div class="text-base">Sitecore, C# and web development</div>
								</div>
							</div>
							<div class="nav -mr-2">
								<button @click="open = false" type="button" class="bg-white rounded-md p-2 inline-flex items-center justify-center text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-indigo-500">
									<span class="sr-only">Close menu</span>
									
									<!-- Heroicon name: outline/x -->
									<svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
										<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
									</svg>
								</button>
							</div>
						</div>
					</div>
					<div class="nav py-6 px-5 pt-0">
						<nav class=" gap-x-8">
							<a class="block mt-5 text-base font-medium" href="/posts">Posts</a>
							<a class="block mt-5 text-base font-medium" href="/tags">Tags</a>
							<a class="block mt-5 text-base font-medium" href="/about">About</a>
							<a class="block mt-5 text-base font-medium" href="/links">Useful Links</a>
							<a class="block mt-5 text-base font-medium" href="/mvp">MVP</a>
						</nav>
					</div>
				</div>
			</div>
		</div>
		<header class="bg-gray-300 px-4 py-1 lg:px-6 text-center" style="">
			<div class="post-heading">
				<div class="url p-1 bg-gray-100 rounded-md">Article printed from:
					<tt>https://blog.jermdavis.dev/posts/2019/a-second-attempt-at-installing-solr-with-sif</tt>
				</div>
				<h1 class="text-5xl mb-4 pb-1">
					A Second attempt at installing Solr with&nbsp;SIF
				</h1>
				<div class="meta">Published 04 March 2019</div>
				<div class="flex py-1 flex-wrap">
					<a href="/tags/sif/" class="p-1 mr-1 mt-1 bg-gray-100 rounded-md whitespace-nowrap">
						SIF</a>
					<a href="/tags/sitecore/" class="p-1 mr-1 mt-1 bg-gray-100 rounded-md whitespace-nowrap">
						Sitecore</a>
					<a href="/tags/solr/" class="p-1 mr-1 mt-1 bg-gray-100 rounded-md whitespace-nowrap">
						Solr</a>
					<a href="/tags/installation/" class="p-1 mr-1 mt-1 bg-gray-100 rounded-md whitespace-nowrap">
						Installation</a>
					<span class="p-1 mr-1 mt-1 bg-gray-100 rounded-md whitespace-nowrap">~4 min. read</span>
				</div>
			</div>
		</header>
		<div class="py-2 lg:pl-3">
			<div class="lg:flex">
				<div class="lg:flex-auto mx-3 lg:min-w-0 content">
					<p>Recently
						<a href="https://twitter.com/steviemcgill" rel="noopener noreferrer" target="_blank">Steve McGill</a>
						asked me if I'd tried using SIF's certificate creation when automating Solr setup for Sitecore. I realised I'd not put any effort into how this might work – and that seemed like an excellent excuse for some research...
						<!--more-->
					</p>
					<p>So what needs to change from
						<a href="/posts/2017/solr-installs-with-sif" target="_blank">my original attempt at installing Solr via SIF</a>
						to make this work?</p>
					<p>If you look at the standard SIF V2 scripts, then they make use of the
						<code>createcert.json</code>
						file to generate certificates. The standard setup passes in some parameters like the name for the certificate and where it should be saved, and the script deals with the generation work and ensuring it's trusted. So it could be called a third time to generate a certificate for Solr and write it out to disk. That would mean changing my original SIF script for Solr so that instead of generating the certificiate it needs, it can take a file that had already been generated, and install it.</p>
					<p>That means making a few adjustments to the PowerShell...</p>
					<h2>Changing my script...</h2>
					<p>When I was checking that my original code was still usable for this, I noticed that I got a lot of warnings from PowerShell telling me that the
						<code>Write-TaskInfo</code>
						had been depreciated, and I should use
						<code>Write-Information</code>
						instead. So I did a quick search and replace to make that change across the
						<code>SolrInstall-SIF-Extension.psm1</code>
						file.</p>
					<p>The biggest logical change to the SIF extension for Solr is that we no longer need to generate a certificate. If we just need to copy a certificate that was already generated - hence the code for
						<code>Invoke-EnsureSSLCertificateTask</code>
						gets a lot simpler:</p>
					<pre class="code" data-enlighter-highlight="14,21,22" data-enlighter-language="powershell" style="width:100%; overflow:scroll;">function Invoke-EnsureSSLCertificateTask
{
    [CmdletBinding(SupportsShouldProcess=$true)]
    param(
        [parameter(Mandatory=$true)]
        [bool]$solrSSL,
        [parameter(Mandatory=$true)]
        [string]$solrName,
        [parameter(Mandatory=$true)]
        [string]$solrHost,
        [parameter(Mandatory=$true)]
        [string]$certificateStore,
        [parameter(Mandatory=$true)]
        [string]$sourceCert
    )

    PROCESS
    {
        if($solrSSL)
        {
            Write-Information -Message "$sourceCert" -Tag "Copying the site cert to $certificateStore"
            copy $sourceCert $certificateStore
        }
    }
}

					</pre>
					<p>A new parameter
						<code>$sourceCert</code>
						is added specifying the path to find the generated certificate. And the logic gets changed to get rid of all the original "generate and trust a certificate" code, and it's replaced with a simple copy operation from the new source location to the same place it went before. I could also get rid of the un-needed parameters that used to be used to generate a certificate, but I realise I didn't get around to that. A task for another day...</p>
					<p>The location of the new certificate and its password also needs to be passed in to
						<code>Invoke-ConfigureSolrTask</code>
						that SIF calls to modify the default Solr config, so it can be passed down the chain...</p>
					<pre class="code" data-enlighter-highlight="14,22" data-enlighter-language="powershell" style="width:100%; overflow:scroll;">function Invoke-ConfigureSolrTask
{
    [CmdletBinding(SupportsShouldProcess=$true)]
    param(
        [parameter(Mandatory=$true)]
        [bool]$solrSSL,
        [parameter(Mandatory=$true)]
        [string]$solrHost,
        [parameter(Mandatory=$true)]
        [string]$solrRoot,
        [parameter(Mandatory=$true)]
        [string]$certificateStore,
        [parameter(Mandatory=$true)]
        [string]$CertificatePassword
    )

    PROCESS
    {
        if($solrSSL)
        {
            Write-Information -Message "HTTPS" -Tag "Configuring Solr for HTTPS access"
            configureHTTPS $solrHost $solrRoot $certificateStore $CertificatePassword
        }
        else
        {
            Write-Information -Message "HTTP" -Tag "Configuring Solr for HTTP access"
            configureHTTP $solrHost $solrRoot
        }
    }
}

					</pre>
					<p>...to the
						<code>configureHTTPS</code>
						method. It already knows how to point Solr at the certificate, but in my original code I'd hardcoded the certificate password for simplicity. SIF doesn't use a simple default password, so we need to be able to pass in the right password, and it needs to be put into the config:</p>
					<pre class="code" data-enlighter-highlight="7,19,21" data-enlighter-language="powershell" style="width:100%; overflow:scroll;">function configureHTTPS
{
    Param(
        [string]$solrHost,
        [string]$solrRoot,
        [string]$certStore,
        [string]$CertificatePassword
    )

    $solrConfig = "$solrRoot\bin\solr.in.cmd"
    if(!(Test-Path -Path "$solrConfig.old"))
    {
        if($pscmdlet.ShouldProcess("$solrConfig", "Rewriting Solr config file for HTTPS"))
        {
            $cfg = Get-Content $solrConfig
            Rename-Item $solrConfig "$solrRoot\bin\solr.in.cmd.old"
            $newCfg = $cfg | % { $_ -replace "REM set SOLR_SSL_KEY_STORE=etc/solr-ssl.keystore.jks", "set SOLR_SSL_KEY_STORE=$certStore" }
            $newCfg = $newCfg | % { $_ -replace "REM set SOLR_SSL_KEY_STORE_PASSWORD=secret", "set SOLR_SSL_KEY_STORE_PASSWORD=$CertificatePassword" }
            $newCfg = $newCfg | % { $_ -replace "REM set SOLR_SSL_TRUST_STORE=etc/solr-ssl.keystore.jks", "set SOLR_SSL_TRUST_STORE=$certStore" }
            $newCfg = $newCfg | % { $_ -replace "REM set SOLR_SSL_TRUST_STORE_PASSWORD=secret", "set SOLR_SSL_TRUST_STORE_PASSWORD=$CertificatePassword" }
            $newCfg = $newCfg | % { $_ -replace "REM set SOLR_HOST=192.168.1.1", "set SOLR_HOST=$solrHost" }
            $newCfg | Set-Content $solrConfig
        }

        Write-Information -Message "$solrConfig" -Tag "Solr config updated for HTTPS access"
    }
    else
    {
        Write-Information -Message "$solrConfig" -Tag "Solr config already updated for HTTPS access - skipping"
    }
}

					</pre>
					<p>So that's the code changes necessary for doing the install of Solr. I realise another tweak I could make here is to get rid of the "install Solr without HTTPS" code path from this file, as we're always using HTTPS. But again, that's a job for when I have some more free time.</p>
					<p>So next is the configuration that binds this into SIF:</p>
					<h2>Adjusting the Solr install extension for SIF</h2>
					<p>Last time I
						<a href="/posts/2017/solr-installs-with-sif" target="_blank">looked at installing Solr alongside Sitecore using SIF</a>
						it was against an earlier version of Sitecore. So that's going to require some changes even before we get to the certificates bit...</p>
					<p>The version of Solr required by v9.1 is Solr 7.2.1. That gets specified in the json file that describes our Solr requirements to SIF. So lets update that parameter. I also have a newer version of Java running on the VM I tested this on, so that needs updating too:</p>
					<pre class="code" data-enlighter-highlight="5,10" data-enlighter-language="jscript" style="width:100%; overflow:scroll;">{
    "Parameters" : {
        "JREVersion": {
            "Type": "string",
            "DefaultValue": "1.8.0_202",
            "Description": "What version of the Java Runtime should "
        },
        "SolrVersion": {
            "Type": "string",
            "DefaultValue": "7.2.1",
            "Description": "What version of Solr should be downloaded for install"
        }
    }
}

					</pre>
					<p>I also decided I wanted a way around the issue of the path for the JRE. Depending on whether you're using 64 bit or 32 bit Java, you get your Java program files folder in a different place. So I decided to add a parameter for which Program Files folder it is using, and configured it for the 64-bit version of Java I was using:</p>
					<pre class="code" data-enlighter-highlight="5" data-enlighter-language="jscript" style="width:100%; overflow:scroll;">{
    "Parameters" : {
        "ProgFilesFolder": {
            "Type": "string",
            "DefaultValue": "C:\\Program Files",
            "Description": "Where certificates got exported to after generation"
        }
    }
}

					</pre>
					<p>That parameter then gets used to help work out the correct JRE path variable from the original script:</p>
					<pre class="code" data-enlighter-highlight="3" data-enlighter-language="jscript" style="width:100%; overflow:scroll;">{
    "Variables" : {
        "JREPath":             "[concat(parameter('ProgFilesFolder'), '\\Java\\jre', parameter('JREVersion'))]"
    },
}

					</pre>
					<p>Since we changed some method signatures in the PowerShell, the Tasks binding needs updating:</p>
					<pre class="code" data-enlighter-highlight="10,20" data-enlighter-language="jscript" style="width:100%; overflow:scroll;">{
    "Tasks" : {
        "Rewrite Solr config file": {
            "Type": "ConfigureSolr",
            "Params": {
                "solrSSL":             "[parameter('SolrUseSSL')]",
                "solrHost":             "[parameter('SolrHost')]",
                "solrRoot":             "[variable('SolrInstallFolder')]",
                "certificateStore":  "[variable('CertStoreFile')]",
                "CertificatePassword": "[parameter('CertificatePassword')]"
            }
        },
        "Ensure trusted SSL certificate exists (if required)": {
            "Type": "EnsureSSLCertificate",
            "Params": {
                "solrSSL":             "[parameter('SolrUseSSL')]",
                "solrName":             "[variable('SolrName')]",
                "solrHost":             "[parameter('SolrHost')]",
                "certificateStore":     "[variable('CertStoreFile')]",
                "sourceCert":           "[variable('SourceCert')]"
            }
        }
    }
}

					</pre>
					<p>Those changes require some extra data to be passed in. The source certificate name is going to be a combination of a path, the host name we're using for Solr and the ".pfx" extension. Since that involves calculation, it means we need to set it up as a Variable:</p>
					<pre class="code" data-enlighter-theme="droide-text" data-enlighter-highlight="2" data-enlighter-language="text" style="width:100%; overflow:scroll;">    "Variables" : {
        "SourceCert":        "[concat(parameter('CertFilePath'), parameter('SolrHost'), '.pfx')]"
    }

					</pre>
					<p>And that means we also have two new parameters to the overall SIF script, in the folder we'll find the certificate in, and the password for the certificate file:</p>
					<pre class="code" data-enlighter-highlight="5,10" data-enlighter-language="jscript" style="width:100%; overflow:scroll;">{
    "Parameters" : {
        "CertFilePath": {
            "Type": "string",
            "DefaultValue": "c:\\certificates\\",
            "Description": "Where certificates got exported to after generation"
        },
        "CertificatePassword": {
            "Type": "string",
            "DefaultValue": "SIF-Default",
            "Description": "The password set on the certificate"
    }
}

					</pre>
					<p>And that's the changes necessary to my original SIF process.
						<a href="https://gist.github.com/jermdavis/989cdec72ede2824012d81ce8610ed37#file-solrserver-json" rel="noopener noreferrer" target="_blank">The json file</a>
						and
						<a href="https://gist.github.com/jermdavis/989cdec72ede2824012d81ce8610ed37#file-solrinstall-sif-extension-psm1" rel="noopener noreferrer" target="_blank">the PowerShell file</a>
						are available in a gist.</p>
					<h2>Adjusting the base SIF config</h2>
					<p>Now that the SIF extension to add Solr is in place, the next thing that needs doing is wiring that into the overall SIF process for Sitecore. That involves changing the overall SIF process json file and the powershell script which involves it. I'm working on a developer install here, so I'm working on the
						<code>XP0-SingleDeveloper</code>
						files.</p>
					<p>The first change to make in
						<code>XP0-SingleDeveloper.json</code>
						is that we need to trigger the creation of a certificate for Solr and then to call the Solr install we created above. These need inserting at the top of the
						<code>Includes</code>
						section so that they happen first:</p>
					<pre class="code" data-enlighter-highlight="4,7" data-enlighter-language="jscript" style="width:100%; overflow:scroll;">{
    "Includes": {
        "SolrCertificates": {
            "Source": ".\\createcert.json"
        },
        "Solr": {
            "Source": ".\\SolrServer.json"
        }
    }
}

					</pre>
					<p>For those to work, some further parameters are required. First up, there are some parameters that define how the rest of the script can work:</p>
					<pre class="code" data-enlighter-theme="droide-text" data-enlighter-highlight="5,10,15" data-enlighter-language="text" style="width:100%; overflow:scroll;">{
    "Parameters": {
        "SolrExportPassword": {
            "Type": "String",
            "DefaultValue": "testpassword",
            "Description": "Password to export the solr cert with."
        },
        "CertPath": {
            "Type": "String",
            "DefaultValue": "c:\\certificates",
            "Description": "where exported certs go"
        },
        "SolrHost": {
            "Type": "String",
            "DefaultValue": "localhost",
            "Description": "The Solr host name to use."
        }
    }
}

					</pre>
					<p>We don't want SIF to generate a password for the Solr certificate, so we need to define a value for that. And we need to tell the Solr install script where it can find the generated certificate and what the host name for Solr should be.</p>
					<p>Some of those values then need passing in to other bits of the script. SIF defines a special naming convention when you want a value to be passed to a specific included script. Where a parameter name is prefixed with the name of an include and a colon, it is specific to that include. Also, instead of defining a default value for these parameters, they define a reference to another parameter's name – effectively copying that value:</p>
					<pre class="code" data-enlighter-theme="droide-text" data-enlighter-highlight="5,10,15" data-enlighter-language="text" style="width:100%; overflow:scroll;">{
    "Parameters": {
        "SolrCertificates:CertificateName": {
            "Type": "String",
            "Reference": "SolrHost",
            "Description": "Override to pass SolrCertificateName value to SolrCertificates config."
        },
        "SolrCertificates:ExportPassword": {
            "Type": "String",
            "Reference": "SolrExportPassword",
            "Description": "Password to export the solr cert with."
        },
        "Solr:CertificatePassword": {
            "Type": "String",
            "Reference": "SolrExportPassword",
            "Description": "Password the solr cert was exported with."
        }
    }
}

					</pre>
					<p>Once these changes are made, you then need to tweak the PowerShell that invokes the JSON data. The change I made here was to pass in the
						<code>SolrHost</code>
						value, but you could pass in the password as well if you wanted to change the default above:</p>
					<pre class="code" data-enlighter-highlight="2,11" data-enlighter-language="powershell" style="width:100%; overflow:scroll;"># Solr host name
$SolrHost = "solr";

# Install XP0 via combined partials file.
$singleDeveloperParams = @{
    Path = "$SCInstallRoot\XP0-SingleDeveloper.json"
    SqlServer = $SqlServer
    SqlAdminUser = $SqlAdminUser
    SqlAdminPassword = $SqlAdminPassword
    SitecoreAdminPassword = $SitecoreAdminPassword
    SolrHost = $SolrHost
    SolrUrl = $SolrUrl
    SolrRoot = $SolrRoot
    SolrService = $SolrService
    Prefix = $Prefix
    XConnectCertificateName = $XConnectSiteName
    IdentityServerCertificateName = $IdentityServerSiteName
    IdentityServerSiteName = $IdentityServerSiteName
    LicenseFile = $LicenseFile
    XConnectPackage = $XConnectPackage
    SitecorePackage = $SitecorePackage
    IdentityServerPackage = $IdentityServerPackage
    XConnectSiteName = $XConnectSiteName
    SitecoreSitename = $SitecoreSiteName
    PasswordRecoveryUrl = $PasswordRecoveryUrl
    SitecoreIdentityAuthority = $SitecoreIdentityAuthority
    XConnectCollectionService = $XConnectCollectionService
    ClientSecret = $ClientSecret
    AllowedCorsOrigins = $AllowedCorsOrigins
}

					</pre>
					<p>Again, these changes to
						<a href="https://gist.github.com/jermdavis/989cdec72ede2824012d81ce8610ed37#file-xp0-singledeveloper-json" rel="noopener noreferrer" target="_blank">the SIF json</a>
						and
						<a href="https://gist.github.com/jermdavis/989cdec72ede2824012d81ce8610ed37#file-xp0-singledeveloper-ps1" rel="noopener noreferrer" target="_blank">the powershell</a>
						are in the gist for this post.</p>
					<h2>Conclusions</h2>
					<p>After a fair amount of hacking about, a lot of reverting my VM, and a pile of fixing my own silly mistakes (Don't forget to use
						<code>Get-Content YourFileNameHere.json | ConvertFrom-Json</code>
						to check if your json is well formed if SIF complains about it!) it works:</p>
					<p>
						<a href="/img/2019/2019-03-solrruns-1.png" target="_blank">
							<img alt="Solr Runs" src="/img/2019/2019-03-solrruns-1.png">
						</a>
					</p>
					<p>I suspect there's a bit more tweaking that could be done here to make it prettier and more flexible, but this is a good start...</p>
					<a class="gotop" href="#top">↑ Back to top</a>
				</div>
				<div class="sidebar lg:flex-none lg:w-64 m-0 mt-1 lg:mt-0 lg:p-1 lg:bg-gray-100">
					<div class="md:flex-row md:flex lg:flex-col">
						<section class="md:flex-2 md:flex-grow md:flex-shrink">
							<h3 class="bg-gray-300 p-2 md:border-r-2 md:border-white lg:border-r-0">Top Tags</h3>
							<div class="bg-white p-2 flex flex-wrap">
								<a href="/tags/sitecore/" class="flex-initial text-lg p-1 mr-1 bg-gray-100 rounded-md mt-1">
									Sitecore (227)</a>
								<a href="/tags/c/" class="flex-initial text-lg p-1 mr-1 bg-gray-100 rounded-md mt-1">
									C# (59)</a>
								<a href="/tags/powershell/" class="flex-initial text-lg p-1 mr-1 bg-gray-100 rounded-md mt-1">
									PowerShell (31)</a>
								<a href="/tags/installation/" class="flex-initial text-lg p-1 mr-1 bg-gray-100 rounded-md mt-1">
									Installation (23)</a>
								<a href="/tags/solr/" class="flex-initial text-lg p-1 mr-1 bg-gray-100 rounded-md mt-1">
									Solr (19)</a>
								<a href="/tags/general/" class="flex-initial text-lg p-1 mr-1 bg-gray-100 rounded-md mt-1">
									General (16)</a>
								<a href="/tags/docker/" class="flex-initial text-lg p-1 mr-1 bg-gray-100 rounded-md mt-1">
									Docker (16)</a>
								<a href="/tags/containers/" class="flex-initial text-lg p-1 mr-1 bg-gray-100 rounded-md mt-1">
									Containers (15)</a>
								<a href="/tags/ui/" class="flex-initial text-lg p-1 mr-1 bg-gray-100 rounded-md mt-1">
									UI (15)</a>
								<a href="/tags/bug/" class="flex-initial text-lg p-1 mr-1 bg-gray-100 rounded-md mt-1">
									Bug (12)</a>
							</div>
							<div class="bg-white mb-2 p-2">
								<a class="text-lg" href="/tags" role="button">All Tags
									<i class="fas fa-angle-double-right"></i>
								</a>
							</div>
						</section>
						<section class="md:flex-2 md:border-l-2 md:border-gray-300 lg:border-l-0 md:flex-shrink-0">
							<h3 class="bg-gray-300 p-2 md:border-r-2 md:border-white lg:border-r-0">Recent Months</h3>
							<div class="bg-white p-2">
								<div>
									<a class="text-lg" href="/posts/2024-03">2024 - March</a>
								</div>
								<div>
									<a class="text-lg" href="/posts/2024-02">2024 - February</a>
								</div>
								<div>
									<a class="text-lg" href="/posts/2024-01">2024 - January</a>
								</div>
								<div>
									<a class="text-lg" href="/posts/2023-12">2023 - December</a>
								</div>
								<div>
									<a class="text-lg" href="/posts/2023-11">2023 - November</a>
								</div>
							</div>
							<div class="bg-white mb-2 p-2">
								<a class="text-lg" href="/posts" role="button">All Posts
									<i class="fas fa-angle-double-right"></i>
								</a>
							</div>
						</section>
						<section class="md:flex-1 md:border-l-2 md:border-gray-300 lg:border-l-0 md:flex-shrink">
							<h3 class="bg-gray-300 p-2 md:border-r-2 md:border-white lg:border-r-0">Socials</h3>
							<div class="bg-white mb-2 p-2">
								<div>
									<a class="text-lg" rel="me" target="_blank" href="https://mastodon.social/@jermdavis">Mastodon</a>
								</div>
								<div>
									<a class="text-lg" rel="me" target="_blank" href="https://bsky.app/profile/jermdavis.dev">Bluesky</a>
								</div>
								<div>
									<a class="text-lg" rel="me" target="_blank" href="https://www.linkedin.com/in/djdavis/">LinkedIn</a>
								</div>
							</div>
						</section>
						<section class="mvp md:flex-2 md:border-l-2 md:border-gray-300 lg:border-l-0 md:flex-shrink-0 lg:order-first">
							<h3 class="bg-gray-300 p-2">Sitecore MVP 2015-2024</h3>
							<div class="bg-white mb-2 p-2">
								<a href="/mvp">
									<img class="lg:mx-auto" src="/img/mvp/10yrs.png" width="219" height="219" alt="2024 MVP Badge">
								</a>
							</div>
						</section>
					</div>
				</div>
			</div>
		</div>
		<footer class="lg:flex order-1 bg-gray-100 px-4 lg:px-6 py-4">
			<div class="flex-1 lg:flex-1 text-center lg:text-left">
				<div>©
					<a target="_blank" class="font-medium" rel="noopener" href="https://jermdavis.dev/">Jeremy Davis</a>
					2014-2024</div>
			</div>
			<div class="lg:flex-1 lg:order-3 text-center lg:text-right">
				<a class="font-medium" href="/tools">Published using Statiq</a>
				<br>
			</div>
			<ul class="list-none lg:flex-1 lg:order-2 p-0 text-center lg:align-middle" style="margin:0px !important">
				<li class="inline-block">
					<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 inline-block" fill="none" viewBox="0 0 24 24" stroke="currentColor">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 5c7.18 0 13 5.82 13 13M6 11a7 7 0 017 7m-6 0a1 1 0 11-2 0 1 1 0 012 0z"></path>
					</svg>
				</li>
				<li class="inline-block ml-4">
					<a class="font-medium" target="_blank" href="/feed.rss">RSS</a>
				</li>
				<li class="inline-block ml-4">
					<a class="font-medium" target="_blank" href="/feed.atom">Atom</a>
				</li>
			</ul>
		</footer>
		<div class="min-h-screen bg-gray-300 py-6 flex flex-col justify-center sm:py-12" x-data="{ hide_banner: true }" x-init="hide_banner = docCookies.hasItem('hide_banner');" x-bind:class="{ 'hidden': hide_banner, 'fixed': !hide_banner }">
			<div class="border-2 border-gray-600 bg-gray-100 max-w-screen-lg mx-auto fixed bg-white inset-x-5 p-5 bottom-10 rounded-lg drop-shadow-2xl flex gap-4 flex-wrap md:flex-nowrap text-center md:text-left items-center justify-center md:justify-between">
				<div class="w-full text-lg">
					<a href="https://developers.google.com/analytics/devguides/collection/analyticsjs/cookie-usage" rel="noreferrer" target="_blank">This website uses Google Analytics, and its cookies.</a>
				</div>
				<button type="button" @click="hide_banner = true; docCookies.setItem('hide_banner', true, 'Fri, 31 Dec 9999 23:59:59 GMT', null, null, null, 'strict');" class="bg-gray-400 px-5 py-2 text-white rounded-md hover:bg-gray-600 focus:outline-none" aria-label="Dismiss">Understood</button>
			</div>
		</div>
		<script src="/vendor/Alpine/alpine.3.13.3.min.js" defer=""></script>
		<script src="/vendor/Enlighter/enlighterjs.min.js"></script>
		<script type="text/javascript">
            EnlighterJS.init('pre.code', 'code', {
            theme: 'droide',
            indent : 4,
            linehover : false,
            textOverflow: 'scroll',
            toolbarTop: '',
            toolbarBottom: ''
        });
        
		</script>
		<script src="/vendor/rp/rpbar-1.0.js"></script>
		<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-JQ44ZR47YX"></script>
		<script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-JQ44ZR47YX');
    
		</script>
	</body>
</html>