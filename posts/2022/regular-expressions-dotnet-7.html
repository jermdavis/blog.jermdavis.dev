<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline' 'unsafe-eval' unpkg.com www.googletagmanager.com *.google-analytics.com; img-src 'self' data: *;style-src 'self' 'unsafe-inline'">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		<link rel="canonical" href="https://blog.jermdavis.dev/posts/2022/regular-expressions-dotnet-7">
		<meta name="description" content="Version 7 of .Net has some interesting new features for Regular Expressions. Here's some ideas about how they can help.">
		<meta property="og:description" content="Version 7 of .Net has some interesting new features for Regular Expressions. Here's some ideas about how they can help.">
		<meta name="keywords" content="C#, .Net">
		<meta name="author" content="Jeremy Davis">
		<meta name="copyright" content="Jeremy Davis">
		<title>Jeremy Davis - Regular Expression improvements in .Net 7</title>
		<meta name="robots" content="index, follow">
		<link type="application/rss+xml" rel="alternate" title="Jeremy Davis - Sitecore, C# and web development" href="/feed.rss">
		<link type="application/atom+xml" rel="alternate" title="Jeremy Davis - Sitecore, C# and web development" href="/feed.atom">
		<meta name="application-name" content="Jeremy Davis">
		<meta name="msapplication-tooltip" content="Jeremy Davis">
		<meta name="msapplication-starturl" content="/">
		<link rel="manifest" href="/manifest.webmanifest">
		<meta property="og:type" content="article">
		<meta property="og:title" content="Regular Expression improvements in .Net 7 [by Jeremy Davis]">
		<meta property="og:publish_date" content="2022-06-06T00:00:00+0000">
		<meta property="article:published_time" content="2022-06-06T00:00:00+0000">
		<meta property="og:image" content="https://blog.jermdavis.dev/img/featured/regular-expressions-dotnet-7-social.jpg">
		<meta property="og:image:alt" content="Logo image showing post title 'Regular Expression improvements in .Net 7' and author 'Jeremy Davis'">
		<script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "article",
        "headline": "Regular Expression improvements in .Net 7",
        "url": "https://blog.jermdavis.dev/posts/2022/regular-expressions-dotnet-7",
        "image": [
            {
                "@type": "ImageObject",
                "contentUrl": "https://blog.jermdavis.dev/img/featured/regular-expressions-dotnet-7-social.jpg",
                "caption": "Logo image showing post title 'Regular Expression improvements in .Net 7' and author 'Jeremy Davis'"
            }
        ],
        "datePublished": "2022-06-06T00:00:00+0000",
        "author": [{
            "@type": "Person",
            "name": "Jeremy Davis",
            "url": "https://jermdavis.dev/"
        }]
    }
    
		</script>
		<meta property="og:url" content="https://blog.jermdavis.dev/posts/2022/regular-expressions-dotnet-7">
		<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
		<link rel="icon" type="image/png" href="/img/favicon-32x32.png" sizes="32x32">
		<link rel="icon" type="image/png" href="/img/favicon-16x16.png" sizes="16x16">
		<link href="/scss/tailwind.css" rel="stylesheet">
		<link href="/vendor/Enlighter/enlighterjs.min.css" rel="stylesheet">
		<link href="/scss/site-theme.css" rel="stylesheet">
		<script src="/vendor/Cookies/cookies.min.js" defer=""></script>
	</head>
	<body class="max-w-7xl mx-auto text-black" id="top">
		<div id="rp-bar"></div>
		<div class="relative bg-white" x-data="{ open: false }">
			
			<!-- desktop -->
			<div class="px-4 lg:px-6 bg-gray-100">
				<div class="bannerContainer flex justify-between items-center border-b-2 border-gray-100 py-6 lg:justify-start lg:space-x-10">
					<div class="flex justify-start lg:w-0 flex-1">
						<a href="/">
							<img class="mt-2" width="56" height="56" src="/img/Profile.jpg" alt="Jeremy Davis">
						</a>
						<div class="mx-2">
							<div class="text-3xl">Jeremy Davis</div>
							<div class="text-lg">Sitecore, C# and web development</div>
						</div>
					</div>
					<div class="nav -mr-2 -my-2 lg:hidden">
						<button @click="open = true" type="button" class="bg-white rounded-md p-2 inline-flex items-center justify-center text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-indigo-500" aria-expanded="false">
							<span class="sr-only">Open menu</span>
							
							<!-- Heroicon name: outline/menu -->
							<svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
								<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
							</svg>
						</button>
					</div>
					<nav class="nav hidden lg:flex space-x-10">
						<a class="text-base font-medium" href="/posts">Posts</a>
						<a class="text-base font-medium" href="/tags">Tags</a>
						<a class="text-base font-medium" href="/about">About</a>
						<a class="text-base font-medium" href="/links">Useful Links</a>
						<a class="text-base font-medium" href="/mvp">MVP</a>
						<a class="text-base font-medium" href="/search">Search</a>
					</nav>
				</div>
			</div>
			
			<!--Mobile menu, show/hide based on mobile menu state.-->
			<div class="absolute top-0 inset-x-0 p-2 transition transform origin-top-right lg:hidden z-50">
				<div style="display:none;" class="rounded-lg shadow-lg ring-1 ring-black ring-opacity-5 bg-white divide-y-2 divide-gray-50" x-show="open" x-transition="">
					<div class="pt-5 pb-6 px-5">
						<div class="flex items-center justify-between">
							<div class="flex">
								<a href="/">
									<img class="mt-2" width="56" height="56" src="/img/Profile.jpg" alt="Jeremy Davis">
								</a>
								<div class="mx-2">
									<div class="text-2xl">Jeremy Davis</div>
									<div class="text-base">Sitecore, C# and web development</div>
								</div>
							</div>
							<div class="nav -mr-2">
								<button @click="open = false" type="button" class="bg-white rounded-md p-2 inline-flex items-center justify-center text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-indigo-500">
									<span class="sr-only">Close menu</span>
									
									<!-- Heroicon name: outline/x -->
									<svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
										<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
									</svg>
								</button>
							</div>
						</div>
					</div>
					<div class="nav py-6 px-5 pt-0">
						<nav class=" gap-x-8">
							<a class="block mt-5 text-base font-medium" href="/posts">Posts</a>
							<a class="block mt-5 text-base font-medium" href="/tags">Tags</a>
							<a class="block mt-5 text-base font-medium" href="/about">About</a>
							<a class="block mt-5 text-base font-medium" href="/links">Useful Links</a>
							<a class="block mt-5 text-base font-medium" href="/mvp">MVP</a>
							<a class="block mt-5 text-base font-medium" href="/search">Search</a>
						</nav>
					</div>
				</div>
			</div>
		</div>
		<header class="bg-gray-300 px-4 py-1 lg:px-6 text-center" style="">
			<div class="post-heading">
				<div class="url p-1 bg-gray-100 rounded-md">Article printed from:
					<tt>https://blog.jermdavis.dev/posts/2022/regular-expressions-dotnet-7</tt>
				</div>
				<h1 class="text-5xl mb-4 pb-1">
					Regular Expression improvements in .Net 7
				</h1>
				<h2 class="text-2xl">Do we have two problems now?</h2>
				<div class="meta">Published 06 June 2022</div>
				<div class="flex py-1 flex-wrap">
					<a href="/tags/c/" class="p-1 mr-1 mt-1 bg-gray-100 rounded-md whitespace-nowrap">
						C#</a>
					<a href="/tags/net/" class="p-1 mr-1 mt-1 bg-gray-100 rounded-md whitespace-nowrap">
						.Net</a>
					<span class="p-1 mr-1 mt-1 bg-gray-100 rounded-md whitespace-nowrap">~5 min. read</span>
				</div>
			</div>
		</header>
		<div class="py-2 lg:pl-3">
			<div class="lg:flex">
				<div class="lg:flex-auto mx-3 lg:min-w-0 content">
					<p>I've spent a bit of time looking at how Regular expressions are changing in the upcoming .Net 7 release. While they do have a bit of a reputation for making people's lives worse (<a href="http://regex.info/blog/2006-09-15/247" target="_blank" rel="noopener">so much there's a well known programmer joke about it</a>) they do have a place in your developer toolbox. So what caught my eye in the new features, and how does code get better with this new version? 
						<!--more-->
					</p>
					<h2 id="my-background-problem">My background problem</h2>
					<p>The need to parse text is pretty common in IT problems, but there's a specific issue I was looking at. I have a long-term personal project to
						<a href="https://en.wikipedia.org/wiki/MUD" target="_blank" rel="noopener">build a "mud" game engine</a>
						in C#. A core part of any text-based adventure game is parsing user input. And the first step is to split the user's input up into tokens. The game needs to do it every time any player issues a command - so it's a bit of code that can be pretty important for overall performance.</p>
					<p>At its simplest, the parser in my game engine takes the string and:</p>
					<ul>
						<li>Splits it by spaces</li>
						<li>Unless a phrase is wrapped in quotes - where its taken as a literal</li>
						<li>And discards punctuation</li>
					</ul>
					<p>So
						<code>give sword to knight</code>
						is broken into the tokens
						<code>give</code>,
						<code>sword</code>,
						<code>to</code>
						and
						<code>knight</code>. And
						<code>give sword to "green knight".</code>
						would be broken into
						<code>give</code>,
						<code>sword</code>,
						<code>to</code>
						and
						<code>green knight</code>. Fairly simple - though the following phases where the code works out the meaning of the text is a bit more complicated. (Perhaps a topic for a future post?)</p>
					<p>A lot of my coding follows the "make it work, then worry about making it pretty" principle so the current implementation of this parsing is based on simple regular expressions. And tbh, I'd never got to the "make it pretty" phase for this bit of code. The core of the work is the Regex
						<code>".*?"|\w*</code>
						- that translates roughly as "match any string surrounded in quotes, or match any string of word characters". That generates a
						<code>Match</code>
						for each token in the user input and those can get stored away for the game engine to use. Stripping out some stuff that's not relevant to this experiment, the core code is roughly this:</p>
					<pre class="code" data-enlighter-language="language=csharp" style="width:100%; overflow:scroll;">public class RegexStringTokeniser
{
    private static string quotes = "\"";
    private static Regex parser = new Regex("\".*?\"|\\w*", RegexOptions.Singleline | RegexOptions.Compiled);

    private List&lt;string&gt; tokens = new List&lt;string&gt;();

    public int Count
    {
        get { return tokens.Count; }
    }

    public IEnumerable&lt;string&gt; Tokens
    {
        get
        {
            foreach (string token in tokens)
            {
                yield return token;
            }
        }
    }

    public RegexStringTokeniser(string input, bool removeQuotes = true)
    {
        ArgumentNullException.ThrowIfNull(input, nameof(input));

        Match m = parser.Match(input);

        while (m.Success)
        {
            if (m.Length &gt; 0)
            {
                if (removeQuotes)
                    tokens.Add(m.Value.Replace(quotes, ""));
                else
                    tokens.Add(m.Value);
            }

            m = m.NextMatch();
        }
    }
}

					</pre>
					<p>Pretty simple - and it works. The only real concession to performance I'd made was to make the regular expression a
						<code>static</code>
						field and mark it as
						<code>RegexOptions.Compiled</code>
						to get the performance boost of not having to parse the expression every time.</p>
					<p>Measuring that with the excellent
						<a href="https://benchmarkdotnet.org/articles/overview.html" target="_blank" rel="noopener">BenchmarkDotNet</a>, when it parses a set of test data we get this as a baseline measurement:</p>
					<p>
						<a target="_blank" href="/img/2022/05-RegexBaseline.png">
							<img alt="Stats for the memory and cpu performance of the regex parser" src="/img/2022/05-RegexBaseline.png">
						</a>
					</p>
					<h2 id="what-are-the-down-sides-here">What are the down sides here?</h2>
					<p>Well they're the two things you're fighting with every bit of code you write: CPU usage (execution time) and Allocations (how much memory gets used).</p>
					<p>Using a compiled
						<code>Regex</code>
						reduces the CPU overhead a bit, and up until now that was all I'd really considered. But looking at the code it's fairly obvious that this has some memory effects - It's allocating 58Kb for the 12 tests. Each expression
						<code>Match</code>
						is a class - a heap allocated object. So every time the matching process runs it's creating and then discarding objects that the GC has to track. And internally, matches are creating strings which get copied about.</p>
					<p>So there are opportunities to improve here.</p>
					<h2 id="the-ideal-solution">The "ideal" solution</h2>
					<p>The most efficient way of addressing this code is to get rid of the need for regular expressions at all. If we accept the loss of flexibility that comes from hard-coding the matching algorithm, the code can step through the input directly. There's another interesting new .Net feature that can help here:
						<code>ReadOnlySpan&lt;T&gt;</code>. (Thought this one is already released, so you can use it now) It's a way of handling "slicing" of arrays of data, and minimising the memory allocations involved. They're not as easy to use as strings, because they're stack-based data they can't be stored in fields or collections. But it's not too difficult to work around that limitiation in order to get the benefits here.</p>
					<p>The code above can get rewritten in this style. It's a bit longer and more complex, but the results are interesting:</p>
					<pre class="code" data-enlighter-language="language=csharp" style="width:100%; overflow:scroll;">public class SpanStringTokeniser
{
    private List&lt;string&gt; tokens = new List&lt;string&gt;();

    public int Count
    {
        get { return tokens.Count; }
    }

    public IEnumerable&lt;string&gt; Tokens
    {
        get
        {
            foreach (string token in tokens)
            {
                yield return token;
            }
        }
    }

    public SpanStringTokeniser(ReadOnlySpan&lt;char&gt; input, bool removeQuotes=true)
    {
        int start = 0;
        int len = 0;
        bool inQuote = false;
        do
        {
            if (!inQuote &amp;&amp; input[start + len] == '"')
            {
                inQuote = true;
                len = 0;
                if (removeQuotes)
                {
                    start += 1;
                }
                else
                {
                    len += 1;
                }
            }
            else if (inQuote &amp;&amp; input[start + len] == '"')
            {
                inQuote = false;

                if(!removeQuotes)
                {
                    len += 1;
                }

                tokens.Add(input.Slice(start, len).ToString());
                start += len;

                if (removeQuotes)
                {
                    start += 1;
                }

                start += SkipPunctuation(input, start);

                len = 0;
            }
            else if (!inQuote &amp;&amp; (char.IsPunctuation(input[start + len]) || char.IsWhiteSpace(input[start + len])) )
            {
                if (len &gt; 0)
                {
                    tokens.Add(input.Slice(start, len).ToString());
                }

                start += len + SkipPunctuation(input, start);
                len = 0;
            }
            else
            {
                len += 1;
            }
        }
        while (start + len &lt; input.Length);

        if (start &lt;= input.Length-1)
        {
            tokens.Add(input.Slice(start).ToString());
        }
    }

    private int SkipPunctuation(ReadOnlySpan&lt;char&gt; input, int pos)
    {
        int delta = 0;
        while( (pos + delta &lt; input.Length) &amp;&amp; (char.IsWhiteSpace(input[pos + delta]) || char.IsPunctuation(input[pos + delta])) &amp;&amp; input[pos + delta] != '"')
        {
            delta += 1;
        }

        return delta;
    }
}

					</pre>
					<p>(I'm pretty sure this isn't the simplest re-write I could do - it's just a first pass for comparisons. All those nested if/else clauses could be improved for a start...)</p>
					<p>Re-doing the measurments to compare this implementation to the original
						<code>Regex</code>
						gives a nice improvement. It's a quarter of the CPU time, and reduces the memory allocations down to 7Kb:</p>
					<p>
						<a target="_blank" href="/img/2022/05-SpanComparison.png">
							<img alt="Comparing the stats for Regex vs Span parsing" src="/img/2022/05-SpanComparison.png">
						</a>
					</p>
					<p>But it's certainly less easy to read...</p>
					<h2 id="what-about-the-middle-ground">What about the middle ground?</h2>
					<p>The latest updates in Preview 4 of .Net 7
						<a href="https://devblogs.microsoft.com/dotnet/regular-expression-improvements-in-dotnet-7/" target="_blank" rel="noopener">add a load of change to Regular Expressions</a>. There's a lot of interesting technical detail in that post, but the key things from my perspective are the ability to generate the "compiled"
						<code>Regex</code>
						at compilation time, and the ability to use ValueTypes to return data about matches.</p>
					<p>Converting the original class to this model involves three main changes.</p>
					<p>First up, instead of declaring the
						<code>Regex</code>
						directly the code can now declare a
						<code>partial static</code>
						property and use the
						<code>[RegexGenerator]</code>
						attribute to specify what expression needs to be generated. That allows the C# compiler to parse the expression we want generated, and then construct the C# code for it and put it into the compiler-generated file for this partial class.</p>
					<p>That change gives two interesting benefits. Firstly it means 100% of the work to turn the regular expression into .Net code happens at compile time, so there's no startup-time penalty for the "compiled" expression that the original code used. And the second is that a side-effect of that is you can now step the debugger into this compiled code, which could be really useful if you need to understand the behaviour of your expression:</p>
					<p>
						<a target="_blank" href="/img/2022/05-DebugIntoRegex.png">
							<img alt="Debugging into a generated Regex" src="/img/2022/05-DebugIntoRegex.png">
						</a>
					</p>
					<p>Secondly, to support that change the overall class needs to be declared
						<code>partial</code>
						too.</p>
					<p>And then thirdly, these new
						<code>Regex</code>
						classes have a new
						<code>EnumerateMatches()</code>
						method which returns a set of
						<code>ValueMatch</code>
						data - stack allocated value types so the GC does not have to get involved.</p>
					<pre class="code" data-enlighter-highlight="1,5,6,33" data-enlighter-language="language=csharp" style="width:100%; overflow:scroll;">public partial class RegexGeneratorStringTokeniser
{
    private static string quotes = "\"";

    [RegexGenerator("\".*?\"|\\w*", RegexOptions.Singleline)]
    private static partial Regex parser();

    private List&lt;string&gt; tokens = new List&lt;string&gt;();

    public int Count
    {
        get { return tokens.Count; }
    }

    public IEnumerable&lt;string&gt; Tokens
    {
        get
        {
            foreach (string token in tokens)
            {
                yield return token;
            }
        }
    }

    public RegexGeneratorStringTokeniser(ReadOnlySpan&lt;char&gt; s, bool removeQuotes = true)
    {
        if (s == null)
        {
            throw new ArgumentNullException(nameof(s));
        }

        foreach (ValueMatch match in parser().EnumerateMatches(s))
        {
            if(match.Length == 0)
            {
                continue;
            }

            if(removeQuotes &amp;&amp; s[match.Index] == '"' &amp;&amp; s[match.Index + match.Length - 1] == '"')
            {
                tokens.Add(s.Slice(match.Index + 1, match.Length - 2).ToString());
            }
            else
            {
                tokens.Add(s.Slice(match.Index, match.Length).ToString());
            }
        }
    }
}

					</pre>
					<p>The code-style police in my head don't really like the use of
						<code>parser().EnumerateMatches(s)</code>
						there - it would be nicer if
						<code>parser</code>
						was a property getter not a method. But
						<a href="https://github.com/dotnet/csharplang/discussions/3412" target="_blank" rel="noopener">partial property getters aren't a thing in C# yet</a>. So I'll just have to put up with that for now...</p>
					<p>That code can also take in a
						<code>ReadOnlySpan&lt;char&gt;</code>
						as its input, as the new
						<code>Regex</code>
						methods can operate on spans. The
						<code>ValueMatch</code>
						data gives the starting position and length of each match found. That data can be used to slice the input span to generate the set of result strings.</p>
					<p>Re-measuring with this version gives more interesting info:</p>
					<p>
						<a target="_blank" href="/img/2022/05-ModernRegex.png">
							<img alt="Measurements comparing .Net 7 Regex to the other two approaches" src="/img/2022/05-ModernRegex.png">
						</a>
					</p>
					<p>This approach gives some of the performance improvement compared to hand-written code, but it maintains the same improved memory performance as that code.</p>
					<h2 id="in-conclusion">In conclusion...</h2>
					<p>This has been an interesting experiment. It shows that hand-crafting parsing code for your specific scenarios is still likely the fastest approach to whatever you're doing. But if this preview code from Microsoft makes it into the final .Net 7 release, regular expressions can be significantly better than they were before. Which makes it more likely that keeping the flexibility they provide is worthwhile.</p>
					<a class="gotop" href="#top">↑ Back to top</a>
				</div>
				<div class="sidebar lg:flex-none lg:w-64 m-0 mt-1 lg:mt-0 lg:p-1 lg:bg-gray-100">
					<div class="md:flex-row md:flex lg:flex-col">
						<section class="md:flex-2 md:flex-grow md:flex-shrink">
							<h3 class="bg-gray-300 p-2 md:border-r-2 md:border-white lg:border-r-0">Top Tags</h3>
							<div class="bg-white p-2 flex flex-wrap">
								<a href="/tags/sitecore/" class="flex-initial text-lg p-1 mr-1 bg-gray-100 rounded-md mt-1">
									Sitecore (231)</a>
								<a href="/tags/c/" class="flex-initial text-lg p-1 mr-1 bg-gray-100 rounded-md mt-1">
									C# (62)</a>
								<a href="/tags/powershell/" class="flex-initial text-lg p-1 mr-1 bg-gray-100 rounded-md mt-1">
									PowerShell (32)</a>
								<a href="/tags/installation/" class="flex-initial text-lg p-1 mr-1 bg-gray-100 rounded-md mt-1">
									Installation (23)</a>
								<a href="/tags/solr/" class="flex-initial text-lg p-1 mr-1 bg-gray-100 rounded-md mt-1">
									Solr (19)</a>
								<a href="/tags/general/" class="flex-initial text-lg p-1 mr-1 bg-gray-100 rounded-md mt-1">
									General (17)</a>
								<a href="/tags/docker/" class="flex-initial text-lg p-1 mr-1 bg-gray-100 rounded-md mt-1">
									Docker (17)</a>
								<a href="/tags/containers/" class="flex-initial text-lg p-1 mr-1 bg-gray-100 rounded-md mt-1">
									Containers (16)</a>
								<a href="/tags/ui/" class="flex-initial text-lg p-1 mr-1 bg-gray-100 rounded-md mt-1">
									UI (15)</a>
								<a href="/tags/bug/" class="flex-initial text-lg p-1 mr-1 bg-gray-100 rounded-md mt-1">
									Bug (12)</a>
							</div>
							<div class="bg-white mb-2 p-2">
								<a class="text-lg" href="/tags" role="button">All Tags
									<i class="fas fa-angle-double-right"></i>
								</a>
							</div>
						</section>
						<section class="md:flex-2 md:border-l-2 md:border-gray-300 lg:border-l-0 md:flex-shrink-0">
							<h3 class="bg-gray-300 p-2 md:border-r-2 md:border-white lg:border-r-0">Recent Months</h3>
							<div class="bg-white p-2">
								<div>
									<a class="text-lg" href="/posts/2024-07">2024 - July</a>
								</div>
								<div>
									<a class="text-lg" href="/posts/2024-06">2024 - June</a>
								</div>
								<div>
									<a class="text-lg" href="/posts/2024-05">2024 - May</a>
								</div>
								<div>
									<a class="text-lg" href="/posts/2024-04">2024 - April</a>
								</div>
								<div>
									<a class="text-lg" href="/posts/2024-03">2024 - March</a>
								</div>
							</div>
							<div class="bg-white mb-2 p-2">
								<a class="text-lg" href="/posts" role="button">All Posts
									<i class="fas fa-angle-double-right"></i>
								</a>
							</div>
						</section>
						<section class="md:flex-1 md:border-l-2 md:border-gray-300 lg:border-l-0 md:flex-shrink">
							<h3 class="bg-gray-300 p-2 md:border-r-2 md:border-white lg:border-r-0">Socials</h3>
							<div class="bg-white mb-2 p-2">
								<div>
									<a class="text-lg" rel="me" target="_blank" href="https://mastodon.social/@jermdavis">Mastodon</a>
								</div>
								<div>
									<a class="text-lg" rel="me" target="_blank" href="https://bsky.app/profile/jermdavis.dev">Bluesky</a>
								</div>
								<div>
									<a class="text-lg" rel="me" target="_blank" href="https://www.linkedin.com/in/djdavis/">LinkedIn</a>
								</div>
							</div>
						</section>
						<section class="mvp md:flex-2 md:border-l-2 md:border-gray-300 lg:border-l-0 md:flex-shrink-0 lg:order-first">
							<h3 class="bg-gray-300 p-2">Sitecore MVP 2015-2024</h3>
							<div class="bg-white mb-2 p-2">
								<a href="/mvp">
									<img class="lg:mx-auto" src="/img/mvp/10yrs.png" width="219" height="219" alt="2024 MVP Badge">
								</a>
							</div>
						</section>
					</div>
				</div>
			</div>
		</div>
		<footer class="lg:flex order-1 bg-gray-100 px-4 lg:px-6 py-4">
			<div class="flex-1 lg:flex-1 text-center lg:text-left">
				<div>©
					<a target="_blank" class="font-medium" rel="noopener" href="https://jermdavis.dev/">Jeremy Davis</a>
					2014-2024</div>
			</div>
			<div class="lg:flex-1 lg:order-3 text-center lg:text-right">
				<a class="font-medium" href="/tools">Published using Statiq</a>
				<br>
			</div>
			<ul class="list-none lg:flex-1 lg:order-2 p-0 text-center lg:align-middle" style="margin:0px !important">
				<li class="inline-block">
					<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 inline-block" fill="none" viewBox="0 0 24 24" stroke="currentColor">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 5c7.18 0 13 5.82 13 13M6 11a7 7 0 017 7m-6 0a1 1 0 11-2 0 1 1 0 012 0z"></path>
					</svg>
				</li>
				<li class="inline-block ml-4">
					<a class="font-medium" target="_blank" href="/feed.rss">RSS</a>
				</li>
				<li class="inline-block ml-4">
					<a class="font-medium" target="_blank" href="/feed.atom">Atom</a>
				</li>
			</ul>
		</footer>
		<div class="min-h-screen bg-gray-300 py-6 flex flex-col justify-center sm:py-12" x-data="{ hide_banner: true }" x-init="hide_banner = docCookies.hasItem('hide_banner');" x-bind:class="{ 'hidden': hide_banner, 'fixed': !hide_banner }">
			<div class="border-2 border-gray-600 bg-gray-100 max-w-screen-lg mx-auto fixed bg-white inset-x-5 p-5 bottom-10 rounded-lg drop-shadow-2xl flex gap-4 flex-wrap md:flex-nowrap text-center md:text-left items-center justify-center md:justify-between">
				<div class="w-full text-lg">
					<a href="https://developers.google.com/analytics/devguides/collection/analyticsjs/cookie-usage" rel="noreferrer" target="_blank">This website uses Google Analytics, and its cookies.</a>
				</div>
				<button type="button" @click="hide_banner = true; docCookies.setItem('hide_banner', true, 'Fri, 31 Dec 9999 23:59:59 GMT', null, null, null, 'strict');" class="bg-gray-400 px-5 py-2 text-white rounded-md hover:bg-gray-600 focus:outline-none" aria-label="Dismiss">Understood</button>
			</div>
		</div>
		<script src="/vendor/Alpine/alpine.3.13.3.min.js" defer=""></script>
		<script src="/vendor/Enlighter/enlighterjs.min.js"></script>
		<script type="text/javascript">
            EnlighterJS.init('pre.code', 'code', {
            theme: 'droide',
            indent : 4,
            linehover : false,
            textOverflow: 'scroll',
            toolbarTop: '',
            toolbarBottom: ''
        });
        
		</script>
		<script src="/vendor/rp/rpbar-1.0.js"></script>
		<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-JQ44ZR47YX"></script>
		<script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-JQ44ZR47YX');
    
		</script>
	</body>
</html>