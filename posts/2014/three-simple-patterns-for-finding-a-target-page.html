<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline' 'unsafe-eval' *.twitter.com unpkg.com www.googletagmanager.com www.google-analytics.com *.twimg.com; img-src 'self' data: *;style-src 'self' 'unsafe-inline' *.twitter.com *.twimg.com">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		<link rel="canonical" href="https://blog.jermdavis.dev/posts/2014/three-simple-patterns-for-finding-a-target-page">
		<meta name="description" content="Quite often when you're putting together a website, you find yourself needing to link the current page to some sort of shared page for an action. &quot;Click here to read terms and conditions&quot; is a common example – where all your products need to be able to link to the Ts &amp; Cs page.
A naive implementation might just hard code the path here, but that is inherently fragile. Renaming or moving the page can easily break your code. So what better approaches might you consider for meeting your requirement while allowing editors flexibility? Having talked about these patterns with colleagues a few times recently, I thought I'd write down some of the basics as a reference for future conversations. ">
		<meta property="og:description" content="Quite often when you're putting together a website, you find yourself needing to link the current page to some sort of shared page for an action. &quot;Click here to read terms and conditions&quot; is a common example – where all your products need to be able to link to the Ts &amp; Cs page.
A naive implementation might just hard code the path here, but that is inherently fragile. Renaming or moving the page can easily break your code. So what better approaches might you consider for meeting your requirement while allowing editors flexibility? Having talked about these patterns with colleagues a few times recently, I thought I'd write down some of the basics as a reference for future conversations. ">
		<meta name="keywords" content="C#, Sitecore">
		<meta name="author" content="Jeremy Davis">
		<meta name="copyright" content="Jeremy Davis">
		<title>Jeremy Davis - Three simple patterns for finding a target&nbsp;page</title>
		<meta name="robots" content="index, follow">
		<link type="application/rss+xml" rel="alternate" title="Jeremy Davis - Sitecore, C# and web development" href="/feed.rss">
		<link type="application/atom+xml" rel="alternate" title="Jeremy Davis - Sitecore, C# and web development" href="/feed.atom">
		<meta name="application-name" content="Jeremy Davis">
		<meta name="msapplication-tooltip" content="Jeremy Davis">
		<meta name="msapplication-starturl" content="/">
		<link rel="manifest" href="/manifest.webmanifest">
		<meta property="og:title" content="Jeremy Davis - Three simple patterns for finding a target&amp;#xA0;page">
		<meta property="og:image" content="https://blog.jermdavis.dev/img/featured/three-simple-patterns-for-finding-a-target-page-social.jpg">
		<script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "Article",
        "headline": "Three simple patterns for finding a target&#xA0;page",
        "image": [
            "https://blog.jermdavis.dev/img/featured/three-simple-patterns-for-finding-a-target-page-social.jpg"
        ],
        "datePublished": "2014-12-08T00:00:00+00:00",
        "dateModified": "2016-08-25T00:00:00+00:00",
        "author": [{
            "@type": "Person",
            "name": "Jeremy Davis",
            "url": "https://jermdavis.dev/"
        }]
    }
    
		</script>
		<meta property="og:url" content="https://blog.jermdavis.dev/posts/2014/three-simple-patterns-for-finding-a-target-page">
		<meta property="og:type" content="website">
		<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
		<link rel="icon" type="image/png" href="/img/favicon-32x32.png" sizes="32x32">
		<link rel="icon" type="image/png" href="/img/favicon-16x16.png" sizes="16x16">
		<link href="/scss/tailwind.css" rel="stylesheet">
		<link href="/vendor/Enlighter/enlighterjs.min.css" rel="stylesheet">
		<link href="/scss/site-theme.css" rel="stylesheet">
		<script src="/vendor/Cookies/cookies.min.js" defer=""></script>
	</head>
	<body class="max-w-7xl mx-auto">
		<div class="relative bg-white" x-data="{ open: false }">
			
			<!-- desktop -->
			<div class="px-4 lg:px-6 bg-gray-100">
				<div class="flex justify-between items-center border-b-2 border-gray-100 py-6 lg:justify-start lg:space-x-10">
					<div class="flex justify-start lg:w-0 flex-1">
						<a href="/">
							<img class="mt-2" width="56" height="56" src="/img/Profile.jpg" alt="Jeremy Davis">
						</a>
						<div class="mx-2">
							<div class="text-3xl">Jeremy Davis</div>
							<div class="text-lg">Sitecore, C# and web development</div>
						</div>
					</div>
					<div class="nav -mr-2 -my-2 lg:hidden">
						<button @click="open = true" type="button" class="bg-white rounded-md p-2 inline-flex items-center justify-center text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-indigo-500" aria-expanded="false">
							<span class="sr-only">Open menu</span>
							
							<!-- Heroicon name: outline/menu -->
							<svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
								<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
							</svg>
						</button>
					</div>
					<nav class="nav hidden lg:flex space-x-10">
						<a class="text-base font-medium text-gray-500 hover:text-gray-900" href="/posts">Posts</a>
						<a class="text-base font-medium text-gray-500 hover:text-gray-900" href="/tags">Tags</a>
						<a class="text-base font-medium text-gray-500 hover:text-gray-900" href="/about">About</a>
						<a class="text-base font-medium text-gray-500 hover:text-gray-900" href="/links">Useful Links</a>
						<a class="text-base font-medium text-gray-500 hover:text-gray-900" href="/mvp">MVP</a>
					</nav>
				</div>
			</div>
			
			<!--Mobile menu, show/hide based on mobile menu state.-->
			<div class="absolute top-0 inset-x-0 p-2 transition transform origin-top-right lg:hidden z-50">
				<div class="rounded-lg shadow-lg ring-1 ring-black ring-opacity-5 bg-white divide-y-2 divide-gray-50" x-show="open" x-transition="">
					<div class="pt-5 pb-6 px-5">
						<div class="flex items-center justify-between">
							<div class="flex">
								<a href="/">
									<img class="mt-2" width="56" height="56" src="/img/Profile.jpg" alt="Jeremy Davis">
								</a>
								<div class="mx-2">
									<div class="text-2xl">Jeremy Davis</div>
									<div class="text-base">Sitecore, C# and web development</div>
								</div>
							</div>
							<div class="nav -mr-2">
								<button @click="open = false" type="button" class="bg-white rounded-md p-2 inline-flex items-center justify-center text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-indigo-500">
									<span class="sr-only">Close menu</span>
									
									<!-- Heroicon name: outline/x -->
									<svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
										<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
									</svg>
								</button>
							</div>
						</div>
					</div>
					<div class="nav py-6 px-5 pt-0">
						<nav class=" gap-x-8">
							<a class="block mt-5 text-base font-medium text-gray-500 hover:text-gray-900" href="/posts">Posts</a>
							<a class="block mt-5 text-base font-medium text-gray-500 hover:text-gray-900" href="/tags">Tags</a>
							<a class="block mt-5 text-base font-medium text-gray-500 hover:text-gray-900" href="/about">About</a>
							<a class="block mt-5 text-base font-medium text-gray-500 hover:text-gray-900" href="/links">Useful Links</a>
							<a class="block mt-5 text-base font-medium text-gray-500 hover:text-gray-900" href="/mvp">MVP</a>
						</nav>
					</div>
				</div>
			</div>
		</div>
		<header class="bg-gray-300 px-4 py-1 lg:px-6 text-center" style="background-image: url(&amp;quot;/&amp;quot;);">
			<div class="post-heading">
				<div class="url p-1 bg-gray-100 rounded-md">Article printed from:
					<tt>https://blog.jermdavis.dev/posts/2014/three-simple-patterns-for-finding-a-target-page</tt>
				</div>
				<h1 class="text-5xl mb-4 pb-1">
					Three simple patterns for finding a target&nbsp;page
				</h1>
				<div class="meta">Published 08 December 2014</div>
				<div class="meta">Updated 25 August 2016</div>
				<div class="flex py-1">
					<a href="/tags/c/" class="p-1 mr-1 bg-gray-100 rounded-md">
						C#</a>
					<a href="/tags/sitecore/" class="p-1 mr-1 bg-gray-100 rounded-md">
						Sitecore</a>
				</div>
			</div>
		</header>
		<div class="py-2 lg:pl-3">
			<div class="lg:flex">
				<div class="lg:flex-auto mx-3 lg:min-w-0 content">
					<p>Quite often when you're putting together a website, you find yourself needing to link the current page to some sort of shared page for an action. "Click here to read terms and conditions" is a common example – where all your products need to be able to link to the Ts &amp; Cs page.</p>
					<p>A naive implementation might just hard code the path here, but that is inherently fragile. Renaming or moving the page can easily break your code. So what better approaches might you consider for meeting your requirement while allowing editors flexibility? Having talked about these patterns with colleagues a few times recently, I thought I'd write down some of the basics as a reference for future conversations. 
						<!--more-->
					</p>
					<h2>One: Centralised configuration</h2>
					<p>If you have a single target page which is linked to from many places, centralising the configuration can be a good solution. You create a single item somewhere in your content tree which contains configuration settings, and you give it a field to select this target page. For example:</p>
					<p>
						<a href="/img/2014/2014-12-siteconfig.png" target="_blank">
							<img alt="Site Configuration" src="/img/2014/2014-12-siteconfig.png">
						</a>
					</p>
					<p>You can create a template like
						<code>CentralConfiguration</code>
						which, for the purposes of this example, contains a single
						<code>DropTree</code>
						field to let you pick the correct Ts&amp;Cs. This field should have "required" validation attached, as you want to ensure that Editors do select a value.</p>
					<p>This is a singleton type of item – there must be exactly one of it in your solution. Hence, chances are, you'll create it in development, commit it to your source control, and deploy it. Hence your code can refer to it by ID.</p>
					<p>So in your solution you might define a constant for that ID:</p>
					<pre data-enlighter-language="csharp" style="width:100%; overflow:scroll;">public static class SiteIdentifiers
{
    public static readonly ID CentralConfigurationItem = new ID("{B2D1731F-C74C-4E55-A147-B64F1652C7FC}");
}

					</pre>
					<p>and then you can have a simple method to fetch the required URL from anywhere in your site:</p>
					<pre data-enlighter-language="csharp" style="width:100%; overflow:scroll;">public string FetchTermsAndConditionsUrl()
{
    var configItem = Sitecore.Context.Database.GetItem(SiteIdentifiers.CentralConfigurationItem);

    var termsPageId = configItem.Fields["TermsPage"].Value;

    var termsPageItem = Sitecore.Context.Database.GetItem(termsPageId);

    return LinkManager.GetItemUrl(termsPageItem);
}

					</pre>
					<p>or, alternately using Sitecore's field types: (Which do largely the same thing under the surface)</p>
					<pre data-enlighter-language="csharp" style="width:100%; overflow:scroll;">public string FetchTermsAndConditionsUrl()
{
    var configItem = Sitecore.Context.Database.GetItem(SiteIdentifiers.CentralConfigurationItem);

    ReferenceField termsPageField = configItem.Fields["TermsPage"];
    var termsPageItem = termsPageField.TargetItem;

    return LinkManager.GetItemUrl(termsPageItem);
}

					</pre>
					<p>In real-world code you'd want some error checking here (especially for empty values or missing items). Also your central config item often ends up used in lots of places, so fetching it once per request (or less – depending on how often it changes) can be an important optimisation. ORM tools like
						<a href="http://glass.lu/en/Mapper/Sc.aspx" target="_blank" rel="noopener noreferrer">Glass</a>
						can also simplify implementing something like this.</p>
					<p>Some types of solution don't allow you to know the specific ID of your central configuration item at compile time, however. Maybe the client is creating all the content, or you're shipping a "toolkit" for creating multiple sites in a single instance of Sitecore. If you find yourself in that scenario you could try either making the
						<a href="http://sitecoreblog.blogspot.co.uk/2011/05/add-custom-property-to-site-node.html" target="_blank" rel="noopener noreferrer">ID a configuration item in the Sitecore config</a>, or you could try a "find it by is Template ID" approach, similar to that discussed below.</p>
					<h2>Two: Look for an item with the right template</h2>
					<p>An alternative approach is to make some simple assumptions about where an item might be located and what template it's based on, and then query for it. For example, you might decide that the Terms &amp; Conditions page will always be a direct child of the site root, and use a special "Terms and Conditions" template.</p>
					<p>Again, you'd probably want to define the template to find as a constant:</p>
					<pre data-enlighter-language="csharp" style="width:100%; overflow:scroll;">public static class SiteIdentifiers
{
    public static readonly ID TermsAndConditionsTemplate = new ID("{76036F5E-CBCE-46D1-AF0A-4143F9B557AA}");
}

					</pre>
					<p>and then you need to find your root item, and run a query from it:</p>
					<pre data-enlighter-language="csharp" style="width:100%; overflow:scroll;">public string FetchTermsAndConditionsUrl()
{
    var rootItem = Sitecore.Context.Database.GetItem(Sitecore.Context.Site.StartPath);

    var query = string.Format("*[@@templateid='{0}']", SiteIdentifiers.TermsAndConditionsTemplate);

    var termsPageItem = rootItem.Axes.SelectSingleItem(query);

    return LinkManager.GetItemUrl(termsPageItem);
}

					</pre>
					<p>One way to find the root item of your site is to use
						<code>Sitecore.Context.Site.StartPath</code>
						to get the data from your
						<code>web.config</code>‘s
						<code>&lt;site&gt;</code>
						element. As above, you'd want to test for missing data or errors in your code. Similar techniques can be used to find the target item if it's a child of the current item, or elsewhere in the tree.</p>
					<p>One advantage of this approach is that sometimes you need your target item to change depending on where you are in the content tree. For example where the Terms and Conditions vary between different sales regions. In that scenario, having a single central config item (as per option one above) doesn't work. An approach like this one, where you search below the sales region that owns the product, can find the appropriate item more easily.</p>
					<h2>Three: You can always just make it a field...</h2>
					<p>Sometimes though, you hit a scenario where you need lots of different terms and conditions pages, and the appropriate page changes often between products in a way that's not obviously reflected in your content tree. In that scenario, you probably want to fall back to letting editors select the right item manually for each product.</p>
					<p>In this example, consider adding a field to specify the Ts &amp; Cs page in the template of the product page. This gives the most flexibility and a trivially simple implementation – it's just a simple link on your page, maybe using the
						<code>sc:Link</code>
						control or a suitable equivalent. However this is at the expense of the most effort for content entry.</p>
					<p>So there you go. No rocket science here, just three possibilities for finding the right page at runtime.</p>
				</div>
				<div class="sidebar lg:flex-none lg:w-72 m-0 mt-1 lg:mt-0 lg:p-1 lg:bg-gray-100">
					<section class="mvp">
						<h3 class="bg-gray-300 p-2">Sitecore MVP 2015-2022</h3>
						<div class="bg-white mb-2 p-2">
							<a href="/mvp">
								<img src="/img/mvp/2022.jpg" width="219" height="219" alt="2022 MVP Badge">
							</a>
						</div>
					</section>
					<section>
						<h3 class="bg-gray-300 p-2">Top Tags</h3>
						<div class="bg-white p-2 flex flex-wrap">
							<a href="/tags/sitecore/" class="flex-initial text-lg p-1 mr-1 bg-gray-100 rounded-md mt-1">
								Sitecore (205)</a>
							<a href="/tags/c/" class="flex-initial text-lg p-1 mr-1 bg-gray-100 rounded-md mt-1">
								C# (47)</a>
							<a href="/tags/powershell/" class="flex-initial text-lg p-1 mr-1 bg-gray-100 rounded-md mt-1">
								PowerShell (31)</a>
							<a href="/tags/installation/" class="flex-initial text-lg p-1 mr-1 bg-gray-100 rounded-md mt-1">
								Installation (23)</a>
							<a href="/tags/solr/" class="flex-initial text-lg p-1 mr-1 bg-gray-100 rounded-md mt-1">
								Solr (16)</a>
							<a href="/tags/general/" class="flex-initial text-lg p-1 mr-1 bg-gray-100 rounded-md mt-1">
								General (14)</a>
							<a href="/tags/ui/" class="flex-initial text-lg p-1 mr-1 bg-gray-100 rounded-md mt-1">
								UI (14)</a>
							<a href="/tags/docker/" class="flex-initial text-lg p-1 mr-1 bg-gray-100 rounded-md mt-1">
								Docker (12)</a>
							<a href="/tags/coveo/" class="flex-initial text-lg p-1 mr-1 bg-gray-100 rounded-md mt-1">
								Coveo (12)</a>
							<a href="/tags/packages/" class="flex-initial text-lg p-1 mr-1 bg-gray-100 rounded-md mt-1">
								Packages (11)</a>
						</div>
						<div class="bg-white mb-2 p-2">
							<a class="" href="/tags" role="button">All Tags
								<i class="fas fa-angle-double-right"></i>
							</a>
						</div>
					</section>
					<section>
						<h3 class="bg-gray-300 p-2">Recent Months</h3>
						<div class="bg-white p-2">
							<div>
								<a class="text-lg" href="/posts/2022-08">2022 - August</a>
							</div>
							<div>
								<a class="text-lg" href="/posts/2022-07">2022 - July</a>
							</div>
							<div>
								<a class="text-lg" href="/posts/2022-06">2022 - June</a>
							</div>
							<div>
								<a class="text-lg" href="/posts/2022-05">2022 - May</a>
							</div>
							<div>
								<a class="text-lg" href="/posts/2022-04">2022 - April</a>
							</div>
						</div>
						<div class="bg-white mb-2 p-2">
							<a class="" href="/posts" role="button">All Posts
								<i class="fas fa-angle-double-right"></i>
							</a>
						</div>
					</section>
					<section>
						<h3 class="bg-gray-300 p-2">Twitter</h3>
						<div class="bg-white mb-2 p-2">
							<a class="twitter-timeline" data-height="400" data-chrome="noheader nofooter noborders" href="https://twitter.com/jermdavis">Tweets by JermDavis</a>
							<script async="" defer="" src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
						</div>
					</section>
				</div>
			</div>
		</div>
		<footer class="lg:flex order-1 bg-gray-100 px-4 lg:px-6 py-4">
			<div class="flex-1 lg:flex-1 text-center lg:text-left">
				<div>©
					<a target="_blank" class="font-medium text-gray-500 hover:text-gray-900" rel="noopener" href="https://jermdavis.dev/">Jeremy Davis</a>
					2014-2022</div>
			</div>
			<div class="lg:flex-1 lg:order-3 text-center lg:text-right">
				<a class="font-medium text-gray-500 hover:text-gray-900" href="/tools">Published using Statiq</a>
				<br>
			</div>
			<ul class="list-none lg:flex-1 lg:order-2 p-0 text-center lg:align-middle" style="margin:0px !important">
				<li class="inline-block">
					<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 inline-block" fill="none" viewBox="0 0 24 24" stroke="currentColor">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 5c7.18 0 13 5.82 13 13M6 11a7 7 0 017 7m-6 0a1 1 0 11-2 0 1 1 0 012 0z"></path>
					</svg>
				</li>
				<li class="inline-block ml-4">
					<a class="font-medium text-gray-500 hover:text-gray-900" target="_blank" href="/feed.rss">RSS</a>
				</li>
				<li class="inline-block ml-4">
					<a class="font-medium text-gray-500 hover:text-gray-900" target="_blank" href="/feed.atom">Atom</a>
				</li>
			</ul>
		</footer>
		<div class="min-h-screen bg-gray-300 py-6 flex flex-col justify-center sm:py-12" x-data="{ hide_banner: true }" x-init="hide_banner = docCookies.hasItem('hide_banner');" x-bind:class="{ 'hidden': hide_banner, 'fixed': !hide_banner }">
			<div class="border-2 border-gray-600 bg-gray-100 max-w-screen-lg mx-auto fixed bg-white inset-x-5 p-5 bottom-10 rounded-lg drop-shadow-2xl flex gap-4 flex-wrap md:flex-nowrap text-center md:text-left items-center justify-center md:justify-between">
				<div class="w-full text-lg">
					<a href="https://developers.google.com/analytics/devguides/collection/analyticsjs/cookie-usage" rel="noreferrer" target="_blank">This website uses Google Analytics, and its cookies.</a>
				</div>
				<button type="button" @click="hide_banner = true; docCookies.setItem('hide_banner', true, 'Fri, 31 Dec 9999 23:59:59 GMT', null, null, null, 'strict');" class="bg-gray-400 px-5 py-2 text-white rounded-md hover:bg-gray-600 focus:outline-none" aria-label="Dismiss">Understood</button>
			</div>
		</div>
		<script src="/vendor/Alpine/alpine.3.7.1.min.js" defer=""></script>
		<script src="/vendor/Enlighter/enlighterjs.min.js"></script>
		<script type="text/javascript">
        EnlighterJS.init('pre', 'code', {
            theme: 'droide',
            indent : 4,
            linehover : false,
            textOverflow: 'scroll',
            toolbarTop: '',
            toolbarBottom: ''
        });
    
		</script>
		<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-JQ44ZR47YX"></script>
		<script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-JQ44ZR47YX');
    
		</script>
	</body>
</html>