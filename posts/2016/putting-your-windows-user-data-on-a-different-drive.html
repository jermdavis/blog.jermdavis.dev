<!DOCTYPE html>
<html lang="en">
	<head>
		<script src="/js/theme.js"></script>
		<meta charset="utf-8">
		<meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline' 'unsafe-eval' unpkg.com www.googletagmanager.com *.google-analytics.com; img-src 'self' data: *;style-src 'self' 'unsafe-inline'; frame-src https://www.youtube.com/">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		<link rel="canonical" href="https://blog.jermdavis.dev/posts/2016/putting-your-windows-user-data-on-a-different-drive">
		<meta name="description" content="The other week I mentioned I'd suffered a hard drive failure on my laptop. Other than the <a href=&quot;/posts/2016/banging-my-head-against-git-visual-studio-15-and-ssl&quot; target=&quot;_blank&quot;>git issues I wrote about last time</a>, I had another issue that seemed worth writing up: How to get all of the user data for the rebuilt install on a separate drive to the programs and operating system. If that's something you might want to do with a Windows install then read on... ">
		<meta property="og:description" content="The other week I mentioned I'd suffered a hard drive failure on my laptop. Other than the <a href=&quot;/posts/2016/banging-my-head-against-git-visual-studio-15-and-ssl&quot; target=&quot;_blank&quot;>git issues I wrote about last time</a>, I had another issue that seemed worth writing up: How to get all of the user data for the rebuilt install on a separate drive to the programs and operating system. If that's something you might want to do with a Windows install then read on... ">
		<meta name="keywords" content="Windows">
		<meta name="author" content="Jeremy Davis">
		<meta name="copyright" content="Jeremy Davis">
		<title>Jeremy Davis - Putting your Windows user data on a different&nbsp;drive</title>
		<meta name="robots" content="index, follow">
		<link type="application/rss+xml" rel="alternate" title="Jeremy Davis - Sitecore, C# and web development" href="/feed.rss">
		<link type="application/atom+xml" rel="alternate" title="Jeremy Davis - Sitecore, C# and web development" href="/feed.atom">
		<meta name="application-name" content="Jeremy Davis">
		<meta name="msapplication-tooltip" content="Jeremy Davis">
		<meta name="msapplication-starturl" content="/">
		<link rel="manifest" href="/manifest.webmanifest">
		<meta name="fediverse:creator" content="@jermdavis@mastodon.social">
		<meta property="og:type" content="article">
		<meta property="og:title" content="Putting your Windows user data on a different&nbsp;drive [by Jeremy Davis]">
		<meta property="og:publish_date" content="2016-11-14T00:00:00+0000">
		<meta property="article:published_time" content="2016-11-14T00:00:00+0000">
		<meta property="og:image" content="https://blog.jermdavis.dev/img/featured/putting-your-windows-user-data-on-a-different-drive-social.jpg">
		<meta property="og:image:alt" content="Logo image showing post title 'Putting your Windows user data on a different&nbsp;drive' and author 'Jeremy Davis'">
		<script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "article",
        "headline": "Putting your Windows user data on a different drive",
        "url": "https://blog.jermdavis.dev/posts/2016/putting-your-windows-user-data-on-a-different-drive",
        "image": [
            {
                "@type": "ImageObject",
                "contentUrl": "https://blog.jermdavis.dev/img/featured/putting-your-windows-user-data-on-a-different-drive-social.jpg",
                "caption": "Logo image showing post title 'Putting your Windows user data on a different drive' and author 'Jeremy Davis'"
            }
        ],
        "datePublished": "2016-11-14T00:00:00+0000",
        "author": [{
            "@type": "Person",
            "name": "Jeremy Davis",
            "url": "https://jermdavis.dev/"
        }]
    }
    
		</script>
		<meta property="og:url" content="https://blog.jermdavis.dev/posts/2016/putting-your-windows-user-data-on-a-different-drive">
		<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
		<link rel="icon" type="image/png" href="/img/favicon-32x32.png" sizes="32x32">
		<link rel="icon" type="image/png" href="/img/favicon-16x16.png" sizes="16x16">
		<link href="/vendor/Enlighter/enlighterjs.min.css" rel="stylesheet">
		<link href="/dist/main.css" rel="stylesheet">
		<script src="/vendor/Cookies/cookies.min.js" defer=""></script>
	</head>
	<body class="blog" x-bind:class="dk ? 'dark' : ''" id="top">
		<div id="rp-bar"></div>
		<div class="blogNavContainer" x-data="{ open: false }">
			<div class="blogNav">
				<div class="bannerContainer">
					<div class="bannerRow">
						<a href="/">
							<img class="mt-2" width="56" height="56" src="/img/Profile.jpg" alt="Jeremy Davis">
						</a>
						<div class="mx-2">
							<div class="text-3xl">Jeremy Davis</div>
							<div class="text-lg">Sitecore, C# and web development</div>
						</div>
					</div>
					<div class="nav navBurger">
						<button @click="open = true" type="button" class="bg-white rounded-md p-2 inline-flex items-center justify-center text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-indigo-500" aria-expanded="false">
							<span class="sr-only">Open menu</span>
							<svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
								<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
							</svg>
						</button>
					</div>
					<nav class="nav navItemSet">
						<a href="/posts">Posts</a>
						<a href="/tags">Tags</a>
						<a href="/about">About</a>
						<a href="/links">Useful Links</a>
						<a href="/mvp">MVP</a>
						<a href="/search">Search</a>
						<button x-cloak="" x-on:click="Clicked('2')" x-show="$store.theme == '1'">
							<img src="/img/Auto.png" width="32" height="32" alt="Auto" title="Automatic theme">
						</button>
						<button x-cloak="" x-on:click="Clicked('3')" x-show="$store.theme == '2'">
							<img src="/img/Light.png" width="32" height="32" alt="Auto" title="Light theme">
						</button>
						<button x-cloak="" x-on:click="Clicked('1')" x-show="$store.theme == '3'">
							<img src="/img/Dark.png" width="32" height="32" alt="Auto" title="Dark theme">
						</button>
					</nav>
				</div>
			</div>
			<div class="mobileContainer">
				<div style="display:none;" class="popupBox" x-show="open" x-transition="">
					<div class="popupHead">
						<div class="popupHeadInner">
							<div class="titleRow">
								<a href="/">
									<img width="56" height="56" src="/img/Profile.jpg" alt="Jeremy Davis">
								</a>
								<div class="mx-2">
									<div class="text-2xl">Jeremy Davis</div>
									<div class="text-base">Sitecore, C# and web development</div>
								</div>
							</div>
							<div class="nav menuRow">
								<button @click="open = false" type="button">
									<span class="sr-only">Close menu</span>
									
									<!-- Heroicon name: outline/x -->
									<svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
										<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
									</svg>
								</button>
							</div>
						</div>
					</div>
					<div class="nav popupItemsOuter">
						<nav class="gap-x-8">
							<a href="/posts">Posts</a>
							<a href="/tags">Tags</a>
							<a href="/about">About</a>
							<a href="/links">Useful Links</a>
							<a href="/mvp">MVP</a>
							<a href="/search">Search</a>
							<button x-cloak="" x-on:click="Clicked('2')" x-show="$store.theme == '1'">
								<img src="/img/Auto.png" width="32" height="32" alt="Auto" title="Automatic theme">
							</button>
							<button x-cloak="" x-on:click="Clicked('3')" x-show="$store.theme == '2'">
								<img src="/img/Light.png" width="32" height="32" alt="Auto" title="Light theme">
							</button>
							<button x-cloak="" x-on:click="Clicked('1')" x-show="$store.theme == '3'">
								<img src="/img/Dark.png" width="32" height="32" alt="Auto" title="Dark theme">
							</button>
						</nav>
					</div>
				</div>
			</div>
		</div>
		<header class="headerContainer" style="">
			<div class="post-heading">
				<div class="url printBanner">Article printed from:
					<tt>https://blog.jermdavis.dev/posts/2016/putting-your-windows-user-data-on-a-different-drive</tt>
				</div>
				<h1>
					Putting your Windows user data on a different&nbsp;drive
				</h1>
				<div class="meta">Published 14 November 2016</div>
				<div class="tagList">
					<a href="/tags/windows/">
						Windows</a>
					<span>~3 min. read</span>
				</div>
			</div>
		</header>
		<div class="blogContainerOuter">
			<div class="blogContainerInner">
				<div class="leftCol content">
					<p>The other week I mentioned I'd suffered a hard drive failure on my laptop. Other than the
						<a href="/posts/2016/banging-my-head-against-git-visual-studio-15-and-ssl" target="_blank">git issues I wrote about last time</a>, I had another issue that seemed worth writing up: How to get all of the user data for the rebuilt install on a separate drive to the programs and operating system. If that's something you might want to do with a Windows install then read on... 
						<!--more-->
					</p>
					<p>I've been using a machine running Windows Server Essentials as a home server for some time, and this manages the backup of my individual PCs. Something I realised with the recent hard disk failure was that it's rare that I'd want to restore the whole drive. The reality is that I usually want to re-install the O/S and applications to a blank drive, and then restore only my data files and some settings from backups. Hence using Windows Server Essentials to back up the entire drive is largely wasting disk space and making the backups take much longer than necessary.</p>
					<p>So I started researching how I could configure my rebuilt machine to get my user data onto a separate volume, and back up only that bit.</p>
					<h2 x-data="" class="anchor">The simple, but incomplete approach<a title="click to copy url" x-on:click.prevent="copy($event.target)" href="#heading1" name="heading1">
							<img src="/img/link.png">
						</a>
						<span>url copied!</span>
					</h2>
					You can move many of your user folders about via the Windows UI. For example, if you right-click your "Documents" folder you can adjust the path via the "Location" tab:
					<p>
						<a href="/img/2016/2016-11-simpleapproach.png" target="_blank">
							<img alt="Moving Documents" src="/img/2016/2016-11-simpleapproach.png">
						</a>
					</p>
					<p>While this is easy, it's not that great a solution. Firstly, it doesn't address any of the settings and data stored in any of the hidden folders that Windows keeps under your Users folder. You're moving some of the child folders of your User folder, but nowhere near all of them. Also some (poorly written) applications which make assumptions about where these folders are supposed to live won't respect the settings here, and will keep writing to the old location anyway.</p>
					<p>So what else can we do?</p>
					<h2 x-data="" class="anchor">The more complex approach<a title="click to copy url" x-on:click.prevent="copy($event.target)" href="#heading2" name="heading2">
							<img src="/img/link.png">
						</a>
						<span>url copied!</span>
					</h2>
					If you're prepared to sort this out when you're in the process of installing Windows, then you can do better than the simple approach. After spending some time with Google, I came across an article describing how to physically move all of the "Users" folder, and then fool Windows into thinking it was still in the right place using directory junctions. The
					<a href="http://winaero.com/blog/move-the-users-folder-in-windows-10-windows-8-and-windows-7/" target="_blank" rel="noopener noreferrer">process I tried came from this article</a>, however I found that the precise approach described there didn't work for me. Here's what I did instead:
					<ul>
						<li>Run the first stage of the Windows Installer from your CD or USB Key</li>
						<li>When you get to the "Which type of installation do you want?" question, use the "Custom Install" option. If you have a single physical drive then you'll need to create (at least) two partitions and format them. Ideally create the O/S volume first and the user data one second. If you are using multiple physical drives then just format them. Then ask Windows to install onto the one you want to be your O/S volume. That will look something like:
							<a href="/img/2016/2016-11-choosevolume.png" target="_blank">
								<img alt="Choose Volume" src="/img/2016/2016-11-choosevolume.png">
							</a>
						</li>
						<li>When you get to the first reboot of the installation, make sure your machine boots the Windows Installer media again (from CD or USB) instead of the O/S volume.</li>
						<li>When the first installer dialog reappears press Shift-F10 to bring up a command prompt.</li>
						<li>Work out the drive letters Windows has assigned for your O/S and data volumes. These will probably not be the letters you expect normally. In my case I had "E:" as the O/S volume and "D:" as my data volume. Yours may be different - if so, you will need to replace the drive letters in the following commands appropriately.</li>
						<li>Copy the Users folder from the O/S volume to the data volume. The command below will copy a collection of files and folders. It may report a small number of "could not copy" errors for some folders - that doesn't seem to be an issue.
							<code>xcopy  "E:\Users" "D:\Users" /e /i /h /k /y /c</code>
						</li>
						<li>Then remove the O/S volume's copy of this folder:
							<code>rmdir "E:Users" /s</code>
						</li>
						<li>Finally replace the folder you just deleted with a link to the folder you copied onto the data volume:
							<code>mklink /j Users "D:\Users</code>
							Those three commands should end up looking something like:
							<a href="/img/2016/2016-11-manualcommands.png" target="_blank">
								<img alt="Manual Commands" src="/img/2016/2016-11-manualcommands.png">
							</a>
						</li>
						<li>Reboot your machine, and allow the installation process to continue by booting the O/S volume.</li>
					</ul>
					<p>If all goes well, the installation should now complete (after you've answered a few more questions) and Windows should run fine. When you look at Explorer you should see something like:<br>
						<a href="/img/2016/2016-11-result.png" target="_blank">
							<img alt="Result" src="/img/2016/2016-11-result.png">
						</a>
						<br>
						Note how the Users folder here has a "this is a link" icon overlay, showing what we've done.</p>
					<p>And with that sorted out, I can now tell the Windows Server Essentials connector software to back up the
						<code>E:</code>
						drive only, so just my files and settings are copied.</p>
					<h2 x-data="" class="anchor">One wrinkle...<a title="click to copy url" x-on:click.prevent="copy($event.target)" href="#heading3" name="heading3">
							<img src="/img/link.png">
						</a>
						<span>url copied!</span>
					</h2>
					I did find one scenario where the steps above don't work quite so easily. That is where the drive letter of your data volume gets changed between you creating the link above, and the installer continuing after rebooting. This seems to happen in some scenarios where the installer sorts the volumes differently to Windows itself – specifically for me it happened on a laptop which had an MSATA SSD and a SATA HDD. The installer sorted the volumes on the MSATA drive before those attached to the SATA drive, but when Windows was running it put them the other way around. If this happens to you, it will cause the installer to put up an error dialog and stop because trying to write to the fake `\Users` directory junction will fail.
					<p>Should you see this error, you can use Shift-F10 to get the command prompt back, and adjust the link. Use
						<code>rmdir Users</code>
						to remove the incorrect directory junction record. Then repeat the
						<code>mklink /j</code>
						command to point a new link to the correct drive letter. Rebooting again should allow the windows installer to complete.</p>
					<p>If you're worried about getting this process right (or you just want to practice), you can test it out in a virtual machine.</p>
					<a class="gotop" href="#top">↑ Back to top</a>
					<ul class="shares">
						<li>
							<b>Feel like sharing?</b>
						</li>
						<li>⇒
							<a target="_blank" rel="nofollow noreferrer" href="https://bsky.app/intent/compose?text=Putting your Windows user data on a different&amp;#xA0;drive%20https://blog.jermdavis.dev/posts/2016/putting-your-windows-user-data-on-a-different-drive">On BlueSky</a>
						</li>
						<li>⇒
							<a target="_blank" rel="nofollow noreferrer" href="https://www.linkedin.com/sharing/share-offsite/?url=https://blog.jermdavis.dev/posts/2016/putting-your-windows-user-data-on-a-different-drive">On LinkedIn</a>
						</li>
						<li>⇒
							<a target="_blank" rel="nofollow noreferrer" href="https://mastodonshare.com/?text=Putting your Windows user data on a different&amp;#xA0;drive&amp;url=https://blog.jermdavis.dev/posts/2016/putting-your-windows-user-data-on-a-different-drive">On Mastodon</a>
						</li>
						<li>⇒
							<a target="_blank" rel="nofollow noreferrer" data-no-validate="data-no-validate" href="mailto:&amp;body=Putting your Windows user data on a different&amp;#xA0;drive%20https://blog.jermdavis.dev/posts/2016/putting-your-windows-user-data-on-a-different-drive">On Email</a>
						</li>
						<li></li>
					</ul>
				</div>
				<div class="rightCol sidebar">
					<div class="barContainer">
						<section class="headingSummary">
							<h3>Post Headings</h3>
							<div>
								<ol class="headings">
									<li>
										<a href="#heading1">The simple, but incomplete approach</a>
									</li>
									<li>
										<a href="#heading2">The more complex approach</a>
									</li>
									<li>
										<a href="#heading3">One wrinkle...</a>
									</li>
								</ol>
							</div>
						</section>
						<section class="mvp">
							<h3>Sitecore MVP 2015-2025</h3>
							<div>
								<a href="/mvp">
									<img class="l" src="/img/mvp/program.png" width="219" height="219" alt="2025 MVP Badge">
									<img class="d" src="/img/mvp/program_d.png" width="219" height="219" alt="2025 MVP Badge">
								</a>
							</div>
						</section>
						<section class="recentTags">
							<h3>Recent Tags</h3>
							<div>
								<a href="/tags/mvc/">
									MVC
								</a>
								<a href="/tags/razor/">
									Razor
								</a>
								<a href="/tags/c/">
									C#
								</a>
								<a href="/tags/net/">
									.Net
								</a>
								<a href="/tags/forms/">
									Forms
								</a>
								<a href="/tags/saas/">
									SaaS
								</a>
								<a href="/tags/sitecore/">
									Sitecore
								</a>
								<a href="/tags/bug/">
									Bug
								</a>
								<a href="/tags/windows/">
									Windows
								</a>
								<a href="/tags/azure/">
									Azure
								</a>
							</div>
						</section>
						<section class="topTags">
							<h3>Top Tags</h3>
							<div class="list">
								<a href="/tags/sitecore/">
									Sitecore (247)</a>
								<a href="/tags/platform-dxp/">
									Platform DXP (216)</a>
								<a href="/tags/c/">
									C# (71)</a>
								<a href="/tags/powershell/">
									PowerShell (33)</a>
								<a href="/tags/installation/">
									Installation (23)</a>
								<a href="/tags/docker/">
									Docker (20)</a>
								<a href="/tags/general/">
									General (19)</a>
								<a href="/tags/solr/">
									Solr (19)</a>
								<a href="/tags/containers/">
									Containers (17)</a>
								<a href="/tags/net/">
									.Net (15)</a>
							</div>
							<div class="link">
								<a href="/tags" role="button">All Tags &gt;</a>
							</div>
						</section>
						<section class="months">
							<h3>Recent Months</h3>
							<div class="list">
								<a href="/posts/2025-09">2025 - September</a>
								<a href="/posts/2025-08">2025 - August</a>
								<a href="/posts/2025-07">2025 - July</a>
								<a href="/posts/2025-06">2025 - June</a>
								<a href="/posts/2025-05">2025 - May</a>
							</div>
							<div class="link">
								<a href="/posts" role="button">All Months &gt;</a>
							</div>
						</section>
						<section class="socials">
							<h3>Socials</h3>
							<div>
								<table>
									<tbody>
										<tr>
											<td class="icon">
												<a rel="me" target="_blank" href="https://bsky.app/profile/jermdavis.dev">
													<img src="/img/bluesky.png" width="32" height="32" alt="Bluesky Logo">
												</a>
											</td>
											<td class="title">
												<a rel="me" target="_blank" href="https://bsky.app/profile/jermdavis.dev">
													Bluesky
												</a>
											</td>
										</tr>
										<tr>
											<td class="icon">
												<a rel="me" target="_blank" href="https://www.linkedin.com/in/djdavis/">
													<img src="/img/linkedin.png" width="32" height="32" alt="LinkedIn Logo">
												</a>
											</td>
											<td class="title">
												<a rel="me" target="_blank" href="https://www.linkedin.com/in/djdavis/">
													LinkedIn
												</a>
											</td>
										</tr>
										<tr>
											<td class="icon">
												<a rel="me" target="_blank" href="https://sitecorechat.slack.com/team/U73KL641G">
													<img src="/img/slack.png" width="32" height="32" alt="Sitecore Slack Logo">
												</a>
											</td>
											<td class="title">
												<a rel="me" target="_blank" href="https://sitecorechat.slack.com/team/U73KL641G">
													Sitecore Slack
												</a>
											</td>
										</tr>
										<tr>
											<td class="icon">
												<a rel="me" target="_blank" href="https://mastodon.social/@jermdavis">
													<img src="/img/mastodon.png" width="32" height="32" alt="Mastodon Logo">
												</a>
											</td>
											<td class="title">
												<a rel="me" target="_blank" href="https://mastodon.social/@jermdavis">
													Mastodon
												</a>
											</td>
										</tr>
									</tbody>
								</table>
							</div>
						</section>
					</div>
				</div>
			</div>
		</div>
		<footer class="footerContainer">
			<div class="copyright">
				<div>©
					<a target="_blank" rel="noopener" href="https://jermdavis.dev/">Jeremy Davis</a>
					2014-2025</div>
			</div>
			<div class="statiq">
				<a href="/tools">Published using Statiq</a>
				<br>
			</div>
			<ul class="feeds">
				<li>
					<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 5c7.18 0 13 5.82 13 13M6 11a7 7 0 017 7m-6 0a1 1 0 11-2 0 1 1 0 012 0z"></path>
					</svg>
				</li>
				<li>
					<a target="_blank" href="/feed.rss">RSS</a>
				</li>
				<li>
					<a target="_blank" href="/feed.atom">Atom</a>
				</li>
			</ul>
		</footer>
		<div x-cloak="" class="cookieContainer" x-data="{ hide_banner: true }" x-init="hide_banner = docCookies.hasItem('hide_banner');" x-bind:class="{ 'hidden': hide_banner, 'fixed': !hide_banner }">
			<div class="panel">
				<div class="link">
					<a href="https://developers.google.com/analytics/devguides/collection/analyticsjs/cookie-usage" rel="noreferrer" target="_blank">This website uses Google Analytics, and its cookies.</a>
				</div>
				<button type="button" @click="hide_banner = true; docCookies.setItem('hide_banner', true, 'Fri, 31 Dec 9999 23:59:59 GMT', null, null, null, 'strict');" class="btn" aria-label="Dismiss">
					Understood
				</button>
			</div>
		</div>
		<script src="/vendor/Alpine/alpine.3.13.3.min.js" defer=""></script>
		<script src="/vendor/Enlighter/enlighterjs.min.js"></script>
		<script type="text/javascript">
            EnlighterJS.init('pre.code', 'code', {
            theme: 'droide',
            indent : 4,
            linehover : false,
            textOverflow: 'scroll',
            toolbarTop: '',
            toolbarBottom: ''
        });
        
		</script>
		<script defer="" src="/vendor/rp/rpbar-1.0.js"></script>
		<script defer="" src="/js/post.js"></script>
		<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-JQ44ZR47YX"></script>
		<script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-JQ44ZR47YX');
    
		</script>
	</body>
</html>